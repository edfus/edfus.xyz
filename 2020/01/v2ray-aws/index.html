<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="preload" href="/combine.js" as="script" type="application/javascript"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=auto"><title>ç”¨awsæ¥ç©ç©V2ray | EDFUS&#39;s Blog</title><link rel="icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="//cdn.jsdelivr.net/gh/edfus/storage/favicons/favicon-32.png"><link rel="icon" type="image/png" sizes="16x16" href="//cdn.jsdelivr.net/gh/edfus/storage/favicons/favicon-16.png"><script async src="/combine.js"></script><meta name="theme-color" content="#222"><link rel="apple-touch-icon" sizes="180x180" href="//cdn.jsdelivr.net/gh/edfus/storage/favicons/apple-touch-icon-180.png"><link rel="mask-icon" href="//cdn.jsdelivr.net/gh/edfus/storage/favicons/safari-pinned-tab.svg"><link rel="manifest" href="https://cdn.jsdelivr.net/gh/edfus/storage/favicons/manifest.webmanifest"><meta name="msapplication-config" content="https://cdn.jsdelivr.net/gh/edfus/storage/favicons/browserconfig.xml"><link rel="canonical" href="https://edfus.xyz/2020/01/v2ray-aws/"><meta name="renderer" content="webkit"><meta name="format-detection" content="telephone=no, email=no"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.2.0"></head><body><remove-mobile-gap><svg id="transition" onload="this.style.backgroundColor = '#222';this.style.opacity = 0;this.style.pointerEvents = 'none';this.style.cursor = 'auto';setTimeout(()=>{this.style.visibility = 'visible';document.body.removeAttribute('style');},300)"/><script>{
  const style = document.getElementById('transition').style;
  if(performance.getEntriesByType('navigation')[0].type === 'reload'){
    style.visibility = 'hidden';
    document.body.removeAttribute('style'); 
  } else {
    if(document.referrer && document.referrer.includes(location.host + '/more/')){
      style.backgroundColor = '#fdfbf8';
      style.transition = 'all .3s ease-in-out';
      // document.body.style.marginRight = window.innerWidth - document.documentElement.clientWidth + 'px';
      document.body.style.overflow = 'hidden';
    }
    else style.backgroundColor = '#222';
  } //TODO: handle history.back()
  window.addEventListener('beforeunload', ()=>{
    style.opacity = 1;
    style.pointerEvents = 'auto';
    // document.body.style.marginRight = window.innerWidth - document.documentElement.clientWidth + 'px';
    document.body.style.overflow = 'hidden';
  }, {passive: true, once: true})
}</script><header id="header"><div id="banner"></div><nav id="mobile-nav" hidden><a href="/" class="mobile-nav-link" title="Home">Home &nbsp;- Lifelog.</a> <a href="/categories/tech/" class="mobile-nav-link" title="Tech">Tech &nbsp;- [Geeky]</a> <a href="/about.html" class="mobile-nav-link" title="About">About - U.N. Owen</a> <a href="/more/" class="mobile-nav-link" title="More">More &nbsp;- Novella & Skit</a></nav><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo" style="cursor:text">EDFUS&#39;s Blog</a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home | æ€</a> <a class="main-nav-link" href="/categories/tech/">Tech | ç‰©</a> <a class="main-nav-link" href="/about">About | æˆ‘</a> <a class="main-nav-link" href="/more/">MORE | å®éªŒ&amp;é˜…è¯»</a></nav><nav id="sub-nav"><a id="nav-search-btn" class="nav-icon" title="æœç´¢" href="javascript: void(0)"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search" id="search-input" tabindex="-1"> <label for="search-input" class="visually-hidden">Powered by Google's site search</label><style>.visually-hidden{clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;margin:-1px;overflow:hidden;padding:0;position:absolute}</style><input type="hidden" name="sitesearch" value="edfus.xyz"></form></div></div></div></header><main id="main" class="outer"><article id="post-v2ray-aws" class="article article-type-post" itemscope itemprop="blogPosts" itemtype="http://schema.org/BlogPosting"><div class="article-meta"><ul class="article-header-tag-list" itemprop="keywords"><li class="article-header-tag-list-item"><a class="article-header-tag-list-link" href="/categories/tech/VPN/" rel="tag">VPN</a></li><li class="article-header-tag-list-item"><a class="article-header-tag-list-link" href="/categories/tech/aws/" rel="tag">aws</a></li><li class="article-header-tag-list-item"><a class="article-header-tag-list-link" href="/categories/tech/%E6%80%BB%E7%BB%93/" rel="tag">æ€»ç»“</a></li></ul><time datetime="2020-01-09T16:00:00.000Z" itemprop="dateCreated" class="article-date">2020-01-10</time><div class="article-category"><a class="article-category-link" href="/categories/tech/">tech</a></div><meta itemprop="author" content="edfus"></div><div class="article-inner toc-on"><header class="article-header"><h1 class="article-title" itemprop="name">ç”¨awsæ¥ç©ç©V2ray</h1></header><div class="article-entry" itemprop="articleBody"><div id="toc"><div id="heading-index">ç›®å½•</div><ol class="md-toc"><li class="md-toc-item md-toc-level-2"><a class="md-toc-link" href="#%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E6%B3%A8%E6%84%8F"><span class="md-toc-text">ä»£ç†æœåŠ¡å™¨åŸç†åŠæ³¨æ„</span></a><ol class="md-toc-child"><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E5%8F%A6%EF%BC%9A%E8%A7%A3%E5%86%B31080%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8"><span class="md-toc-text">å¦ï¼šè§£å†³1080ç«¯å£è¢«å ç”¨</span></a></li></ol></li><li class="md-toc-item md-toc-level-2"><a class="md-toc-link" href="#%E5%88%A9%E7%94%A8AWS%E7%9A%84%E5%85%8D%E8%B4%B9%E8%B4%A6%E6%88%B7"><span class="md-toc-text">åˆ©ç”¨AWSçš„å…è´¹è´¦æˆ·</span></a></li><li class="md-toc-item md-toc-level-2"><a class="md-toc-link" href="#%E7%94%A8student-developer-pack"><span class="md-toc-text">ç”¨student developer pack</span></a><ol class="md-toc-child"><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E7%94%A8%E5%AD%A6%E7%94%9F%E5%8C%85%E5%8F%AF%E4%BB%A5%E5%AB%96%E5%88%B0%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="md-toc-text">ç”¨å­¦ç”ŸåŒ…å¯ä»¥å«–åˆ°ä»€ä¹ˆï¼Ÿ</span></a></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#AWS%E5%AD%A6%E7%94%9F%E5%8C%85%EF%BC%88%E4%B8%8D%E9%9C%80%E8%A6%81%E5%9B%BD%E9%99%85%E4%BF%A1%E7%94%A8%E5%8D%A1%EF%BC%81%EF%BC%89"><span class="md-toc-text">AWSå­¦ç”ŸåŒ…ï¼ˆä¸éœ€è¦å›½é™…ä¿¡ç”¨å¡ï¼ï¼‰</span></a></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E7%94%B3%E8%AF%B7%E5%85%8D%E8%B4%B9%E5%9F%9F%E5%90%8D"><span class="md-toc-text">ç”³è¯·å…è´¹åŸŸå</span></a></li></ol></li><li class="md-toc-item md-toc-level-2"><a class="md-toc-link" href="#VPS%E9%85%8D%E7%BD%AE"><span class="md-toc-text">VPSé…ç½®</span></a><ol class="md-toc-child"><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#Ubuntu%E5%9F%BA%E7%A1%80"><span class="md-toc-text">UbuntuåŸºç¡€</span></a><ol class="md-toc-child"><li class="md-toc-item md-toc-level-4"><a class="md-toc-link" href="#%E7%94%A8ssh%E8%BF%9E%E6%8E%A5%E5%88%B0Ubuntu"><span class="md-toc-text">ç”¨sshè¿æ¥åˆ°Ubuntu</span></a></li><li class="md-toc-item md-toc-level-4"><a class="md-toc-link" href="#Ubuntu%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%8E%B7%E5%8F%96root%E6%9D%83%E9%99%90"><span class="md-toc-text">Ubuntuç³»ç»ŸæœåŠ¡å™¨è·å–rootæƒé™</span></a></li><li class="md-toc-item md-toc-level-4"><a class="md-toc-link" href="#%E6%9B%B4%E6%94%B9Ubuntu%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6%E9%97%B4"><span class="md-toc-text">æ›´æ”¹UbuntuæœåŠ¡å™¨æ—¶é—´</span></a></li><li class="md-toc-item md-toc-level-4"><a class="md-toc-link" href="#ubuntu-vi%E7%BC%96%E8%BE%91%E5%99%A8"><span class="md-toc-text">ubuntu viç¼–è¾‘å™¨</span></a></li><li class="md-toc-item md-toc-level-4"><a class="md-toc-link" href="#ubuntu-%E5%88%A0%E9%99%A4-span-class-chineselangpause-%E3%80%81-span-%E6%96%B0%E5%BB%BA%E2%80%A6%E2%80%A6"><span class="md-toc-text">ubuntu åˆ é™¤ã€æ–°å»ºâ€¦â€¦</span></a></li></ol></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#v2ray%E5%8F%8Acaddy%E5%AE%89%E8%A3%85"><span class="md-toc-text">v2rayåŠcaddyå®‰è£…</span></a></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E6%96%B0%E5%BB%BA-span-class-chineselangpause-%E3%80%81-span-%E4%BF%AE%E6%94%B9V2ray-Caddy%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="md-toc-text">æ–°å»ºã€ä¿®æ”¹V2ray | Caddyçš„é…ç½®æ–‡ä»¶</span></a></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E8%AE%BE%E7%BD%AEV2ray-config-json"><span class="md-toc-text">è®¾ç½®V2ray&#x2F;config.json</span></a></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#v2ray-config-json-span-class-chineselangpause-%E3%80%81-span-caddyfile%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A3%80%E6%B5%8B"><span class="md-toc-text">v2ray&#x2F;config.jsonã€caddyfileé…ç½®æ–‡ä»¶æ£€æµ‹</span></a></li></ol></li><li class="md-toc-item md-toc-level-2"><a class="md-toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AFV2ray%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="md-toc-text">å®¢æˆ·ç«¯V2rayçš„é…ç½®</span></a></li><li class="md-toc-item md-toc-level-2"><a class="md-toc-link" href="#VPS%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%85%B6%E4%BB%96%E8%AE%BE%E5%AE%9A"><span class="md-toc-text">VPSç³»ç»Ÿçš„å…¶ä»–è®¾å®š</span></a><ol class="md-toc-child"><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E5%BC%80%E5%90%AFBBR"><span class="md-toc-text">å¼€å¯BBR</span></a><ol class="md-toc-child"><li class="md-toc-item md-toc-level-4"><a class="md-toc-link" href="#%E6%A3%80%E6%9F%A5Linux%E5%86%85%E6%A0%B8%E7%9A%84%E7%89%88%E6%9C%AC"><span class="md-toc-text">æ£€æŸ¥Linuxå†…æ ¸çš„ç‰ˆæœ¬</span></a></li></ol></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#VPS%E4%B8%8A%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F%E9%87%8D%E5%90%AF%EF%BC%88System-Restart-Required%EF%BC%89"><span class="md-toc-text">VPSä¸Šçš„Ubuntuç³»ç»Ÿé‡å¯ï¼ˆSystem Restart Requiredï¼‰</span></a></li><li class="md-toc-item md-toc-level-3"><a class="md-toc-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C"><span class="md-toc-text">å¼€æœºè‡ªåŠ¨æ‰§è¡Œ</span></a></li></ol></li></ol></div><hr><p>ä¸€ç›´æƒ³ææ¸…æ¥šVPN<span class="chineselangpause">ã€</span>VPS<span class="chineselangcomma">ï¼Œ</span>å¹¶å¸Œæœ›åœ¨ç‰¹æ®Šæ—¶æœŸè‡ªå·±ä¹Ÿèƒ½æœ‰ä¸€ä¸ªç¨³å®šçš„æ¸ é“â€¦â€¦äºæ˜¯é‚£å‡ å¤©æŠ˜è…¾äº†ä¸‹è¿™æ–¹é¢<span class="chineselangstop">ã€‚</span></p><p>å˜›<span class="chineselangcomma">ï¼Œ</span>ä½†è¿™ä¹‹åå°±æ²¡æ€ä¹ˆç”¨è¿‡äº†<span class="chineselangstop">ã€‚</span>è¿˜æ˜¯å¤ªéº»çƒ¦<span class="chineselangstop">ã€‚</span></p><hr><h2 id="ä»£ç†æœåŠ¡å™¨åŸç†åŠæ³¨æ„">ä»£ç†æœåŠ¡å™¨åŸç†åŠæ³¨æ„</h2><ol><li><p>GFWå®ç°ç½‘ç»œå°é”<span class="chineselangcomma">ï¼Œ</span>ä¹Ÿå°±æ˜¯â€œå¢™â€çš„æ–¹æ³•ä¸»è¦æ˜¯<strong>DNSåŠ«æŒå’Œé”IP</strong>ç­‰</p></li><li><p>shadowssocksåŒæ ·ä¹Ÿæ˜¯ä¸€ç§ä»£ç†åè®®<span class="chineselangcomma">ï¼Œ</span>æ˜¯å…¶ä½œè€…Clowwindyä¸ºå›½äººè®¾è®¡çš„ç”¨äºç§‘å­¦ä¸Šç½‘çš„ä»£ç†åè®®<span class="chineselangstop">ã€‚</span>æœ¬è´¨ä¸Šsså¾ˆç®€å•<span class="chineselangcomma">ï¼Œ</span>å°±æ˜¯åšäº†æµé‡çš„è½¬å‘<span class="chineselangcomma">ï¼Œ</span>åªä¸è¿‡ä¸ºäº†é¿å…æµé‡è¢«æ£€æµ‹<span class="chineselangcomma">ï¼Œ</span>åŠ å¯†å¹¶ä¸”è¿˜æœ‰<strong>æ··æ·†</strong>çš„åŠŸèƒ½<span class="chineselangstop">ã€‚</span></p></li><li><p><strong>æ­£å‘ä»£ç†</strong><span class="chineselangcomma">ï¼Œ</span>æ˜¯ä»å®¢æˆ·/å®¢æˆ·ç«¯è§’åº¦å‡ºå‘<span class="chineselangcomma">ï¼Œ</span>å³ä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨ä¸­å–å¾—å†…å®¹<span class="chineselangcomma">ï¼Œ</span>ç”±å®¢æˆ·ç«¯æƒ³ä»£ç†æœåŠ¡å™¨å‘å‡ºè¯·æ±‚<span class="chineselangcomma">ï¼Œ</span>å¹¶æŒ‡å®šç›®æ ‡è®¿é—®æœåŠ¡å™¨<span class="chineselangcomma">ï¼Œ</span>è€Œå<span class="chineselangcomma">ï¼Œ</span>ä»£ç†ï¼ˆæœåŠ¡å™¨ï¼‰å‘ç›®æ ‡æœåŠ¡å™¨è½¬è§’éœ€æ±‚<span class="chineselangcomma">ï¼Œ</span>å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯<span class="chineselangstop">ã€‚</span>æ­£å‘ä»£ç†é—­ç¯å®Œæˆ<span class="chineselangstop">ã€‚</span></p><p>åœ¨æ­£å‘ä»£ç†è¿‡ç¨‹ä¸­éšè—äº†çœŸæ˜¯è¯·æ±‚çš„å®¢æˆ·ç«¯<span class="chineselangcomma">ï¼Œ</span>å³æœåŠ¡ç«¯ä¸çŸ¥é“æ­£å¼è¯·æ±‚å®¢æˆ·æ˜¯è°<span class="chineselangstop">ã€‚</span>è®²åˆ°è¿™é‡Œ<span class="chineselangcomma">ï¼Œ</span>å¤§å®¶æ˜¯ä¸æ˜¯æƒ³åˆ°äº†ä»€ä¹ˆå‘¢ï¼Ÿæ²¡é”™<span class="chineselangcomma">ï¼Œ</span>å¤§å¤šæ•°ç§‘å­¦ä¸Šç½‘è¡Œä¸ºéƒ½æ˜¯è¿™ä¹ˆå‘ç”Ÿçš„<span class="chineselangstop">ã€‚</span></p></li><li><p><strong>åå‘ä»£ç†</strong>ä¸€èˆ¬æ˜¯ä»æœåŠ¡ç«¯å‡ºå‘<span class="chineselangcomma">ï¼Œ</span>ä»ç½‘ç»œæˆ–è€…å®¢æˆ·ï¼ˆç«¯ï¼‰å‘å‘åå‘ä»£ç†å‡ºè¯·æ±‚<span class="chineselangcomma">ï¼Œ</span>åå‘ä»£ç†æœåŠ¡å™¨æ”¶åˆ°éœ€æ±‚ååˆ¤æ–­è¯·æ±‚èµ°å‘ä½•å¤„<span class="chineselangcomma">ï¼Œ</span>ç„¶åå†å°†ç»“æœåé¦ˆç»™å®¢æˆ·ç«¯<span class="chineselangstop">ã€‚</span>åå‘ä»£ç†é—­ç¯å®Œæˆ<span class="chineselangstop">ã€‚</span></p><p>åŒæ ·éœ€è¦æ³¨æ„çš„æ˜¯<span class="chineselangcomma">ï¼Œ</span>åœ¨åå‘ä»£ç†è¿‡ç¨‹ä¸­<span class="chineselangcomma">ï¼Œ</span>éšè—äº†å†…éƒ¨æœåŠ¡å™¨çš„ä¿¡æ¯<span class="chineselangcomma">ï¼Œ</span>ç”¨æˆ·ä¸éœ€è¦çŸ¥é“æ˜¯å…·ä½“å“ªä¸€å°æœåŠ¡å™¨æä¾›çš„æœåŠ¡<span class="chineselangcomma">ï¼Œ</span>åªè¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†<span class="chineselangcomma">ï¼Œ</span>æˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠåå‘ä»£ç†æœåŠ¡å™¨å½“åšçœŸæ­£æœåŠ¡å™¨çœ‹å¾…<span class="chineselangstop">ã€‚</span>è¿™ç§å½¢å¼çš„ä»£ç†é€šå¸¸è¢«ç”¨ä½œå®ç°è´Ÿè½½å‡è¡¡<span class="chineselangcomma">ï¼Œ</span>æ¯”å¦‚Nginxå°±æ˜¯ä¸€ç§å‡ºè‰²çš„åå‘ä»£ç†æœåŠ¡å™¨<span class="chineselangstop">ã€‚</span></p></li><li><p><strong>æˆ‘ä¸ªäººåœ¨ç§‘å­¦ä¸Šç½‘-è‡ªå»ºè¿™æ–¹é¢éœ€è¦çš„æ˜¯ä¸ªäººçš„ï¼ˆå¯¹å¸¦å®½|å»¶è¿Ÿæ— å¤ªå¤§è¦æ±‚ï¼‰<span class="chineselangpause">ã€</span>å®‰å…¨çš„<span class="chineselangpause">ã€</span>ç¨³å®šç”šè‡³å¯ä»¥æ’‘è¿‡ç‰¹æ®Šæ—¶æœŸçš„VPNä½“éªŒ<span class="chineselangcomma">ï¼Œ</span>æ—¥å¸¸å¹¶ä¸ä½¿ç”¨V2ray</strong>ï¼ˆå¦å¤–ä¹Ÿæ˜¯å®éªŒæ€§è´¨çš„ï¼‰<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥ä½¿ç”¨ç™½å«–çš„VPS<span class="chineselangcomma">ï¼Œ</span>ç”¨ç›®å‰æœ€å®‰å…¨çš„v2ray+caddy+websocket+tlsï¼ˆé€šè¿‡pathï¼‰<span class="chineselangstop">ã€‚</span>åŸŸåæ˜¯å…è´¹çš„freenomçš„tkåŸŸå</p><blockquote><p>Letâ€™s Encryptæä¾›äº†3ç±»éªŒè¯ï¼ˆChallengeï¼‰æ–¹å¼<span class="chineselangcomma">ï¼Œ</span>ç”¨äºé¢å‘è¯ä¹¦(<strong>è¿™é‡Œä½¿ç”¨æ¥caddyå®Œæˆ</strong>)ï¼š</p><ul><li><code>HTTP-01</code>ï¼šé€šè¿‡HTTPè®¿é—®æœåŠ¡å™¨80ç«¯å£çš„<code>.well-known/acme-challenge</code>éªŒè¯<span class="chineselangstop">ã€‚</span></li><li><code>DNS-01</code>ï¼šåœ¨DNSä¸­æ·»åŠ <code>_acme-challenge</code>å¼€å¤´çš„TXTè®°å½•<span class="chineselangcomma">ï¼Œ</span>è¿™ç§æ–¹å¼å› ä¸ºèƒ½ç­¾å‘é€šé…ç¬¦è¯ä¹¦ï¼ˆWildcardï¼‰è€Œè¢«å¤§èŒƒå›´ä½¿ç”¨<span class="chineselangstop">ã€‚</span></li><li><code>TLS-SNI-01</code><span class="chineselangpause">ã€</span><code>TLS-ALPN-01</code>ï¼šé€šè¿‡TLSçš„æ–¹å¼å¯¹443ç«¯å£è®¿é—®è¿›è¡ŒéªŒè¯<span class="chineselangstop">ã€‚</span></li></ul></blockquote></li></ol><h3 id="å¦ï¼šè§£å†³1080ç«¯å£è¢«å ç”¨">å¦ï¼šè§£å†³1080ç«¯å£è¢«å ç”¨</h3><p>http çš„é»˜è®¤ç«¯å£æ˜¯ 80ï¼›https çš„é»˜è®¤ç«¯å£æ˜¯ 433</p><p>ssh çš„é»˜è®¤ç«¯å£æ˜¯ 22ï¼›telnet çš„é»˜è®¤ç«¯å£æ˜¯ 23ï¼›ftp çš„é»˜è®¤ç«¯å£æ˜¯ 20 å’Œ 21<span class="chineselangcomma">ï¼Œ</span>å…¶ä¸­ 20 è´Ÿè´£è¿æ¥<span class="chineselangcomma">ï¼Œ</span>21 è´Ÿè´£ä¼ è¾“æ•°æ®<span class="chineselangstop">ã€‚</span></p><p>1080ç«¯å£æ˜¯Socksä»£ç†æœåŠ¡ä½¿ç”¨çš„ç«¯å£<span class="chineselangstop">ã€‚</span></p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Hydra_xyc/article/details/91049952">SSRçš„1080ç«¯å£è¢«å ç”¨</a></p><blockquote><p>é…ç½®æ–‡ä»¶ gui-config.jsonä¸­</p><p>æ‰¾åˆ°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;localPort&quot; : 1080,</span><br></pre></td></tr></table></figure><p>ä½ å®Œå…¨å¯ä»¥æ¢ä¸€ä¸ªç«¯å£å·<span class="chineselangcomma">ï¼Œ</span>æ¯”å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;localPort&quot; : 12345 #éšä¾¿ä¸€ä¸ªä¸ä¼šè¢«å ç”¨çš„</span><br></pre></td></tr></table></figure><p>å†åœ¨è®¾ç½®é‡Œæ”¹ä¸‹æœ¬åœ°ç«¯å£å°±è¡Œ</p><p>ï¼ˆGlobal setting - Local proxy - Proxy port)</p></blockquote><p>æ‰€ä»¥è¯´åœ¨å®¢æˆ·ç«¯è®¾ç½®ä»£ç†ç«¯å£çš„æ—¶å€™ä¸å¦¨æ‰¾ä¸ªååƒ»çš„ä¸ç”¨çš„</p><h2 id="åˆ©ç”¨AWSçš„å…è´¹è´¦æˆ·">åˆ©ç”¨AWSçš„å…è´¹è´¦æˆ·</h2><blockquote><p><a target="_blank" rel="noopener" href="https://www.cloudping.info/">https://www.cloudping.info/</a></p><p>æ£€æµ‹AWSçš„æœºæˆ¿åˆ°ä½ è¿™çš„å»¶è¿Ÿ</p></blockquote><blockquote><blockquote><p><a target="_blank" rel="noopener" href="https://www.dazhuanlan.com/2020/01/02/5e0dd17aaef45/">https://www.dazhuanlan.com/2020/01/02/5e0dd17aaef45/</a></p><ul><li>å…¨çƒä»˜çš„å¼€é€š</li><li>æ³¨å†Œäºšé©¬é€Šäº‘è´¦æˆ·</li><li>åˆ›å»ºå®ä¾‹</li><li>ping<span class="chineselangpause">ã€</span>åˆ é™¤é‡å»ºå®ä¾‹</li><li>è¿æ¥å®ä¾‹</li></ul><p>æ³¨ï¼šå…¨çƒä»˜ç­‰æ˜¯éç™½å«–ç”¨æˆ·çš„åšæ³•<span class="chineselangcomma">ï¼Œ</span>æˆ‘è¿™é‡Œä½¿ç”¨å­¦ç”ŸåŒ…<span class="chineselangstop">ã€‚</span></p></blockquote><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ol><li><p><strong>AWSçš„å®˜æ–¹æ“ä½œæŒ‡å—å¾ˆè¯¦ç»†</strong></p></li><li><blockquote><p>AWS å…è´¹å¥—é¤åŒ…æ‹¬ä¸ºæœŸä¸€å¹´æ¯æœˆ 750 å°æ—¶ Linux å’Œ Windows å¾®å‹å®ä¾‹çš„è¯•ç”¨æ—¶é—´<span class="chineselangstop">ã€‚</span></p></blockquote></li></ol><p>æ³¨æ„<span class="chineselangcomma">ï¼Œ</span>æ˜¯â€œå’Œâ€<span class="chineselangcomma">ï¼Œ</span>ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥åŒæ—¶è¿è¡Œä¸€ä¸ª Linux å¾®å‹å®ä¾‹å’Œä¸€ä¸ª Windows å¾®å‹å®ä¾‹<span class="chineselangcomma">ï¼Œ</span>å„å…è´¹750å°æ—¶<span class="chineselangstop">ã€‚</span>è€Œä¸”ä¸€ä¸ªæœˆæœ€å¤šä¹Ÿå°±24Ã—31=744h<span class="chineselangcomma">ï¼Œ</span>æ—¶é—´æ˜¯è‚¯å®šä¸ç”¨æ‹…å¿ƒäº†<span class="chineselangstop">ã€‚</span>ä½†æ˜¯åˆ«é«˜å…´å¾—å¤ªæ—©<span class="chineselangstop">ã€‚</span>è¦ç”¨å…è´¹çš„ä½ å¿…é¡»ç”¨å¾®å‹å®ä¾‹<span class="chineselangcomma">ï¼Œ</span>è€Œå¾®å‹å®ä¾‹åªèƒ½ä½¿ç”¨ä»¥ EBS ä½œä¸ºå­˜å‚¨çš„ç³»ç»Ÿé•œåƒï¼›å†çœ‹ä¸€ä¸‹ EBS çš„å…è´¹é¢åº¦<span class="chineselangcomma">ï¼Œ</span>åŒºåŒº30GB<span class="chineselangdash">â€”â€”</span>é‰´äºæ‰€æœ‰ Windows é•œåƒè¦æ±‚æœ€å°å­˜å‚¨å®¹é‡ä¸º30GB<span class="chineselangcomma">ï¼Œ</span>è¦åŒæ—¶å†è¿è¡Œä¸€ä¸ª Linux å®ä¾‹å°±å¾—ä¸º EBS åŸ‹å•äº†<span class="chineselangstop">ã€‚</span>æ‰€ä»¥å½’æ ¹åˆ°åº•<span class="chineselangcomma">ï¼Œ</span>Amazonåªå…è®¸ä½ åŒæ—¶è¿è¡Œä¸€ä¸ªå¾®å‹å®ä¾‹<span class="chineselangstop">ã€‚</span>å¦‚æœä½ æƒ³å…ˆç”¨ä¸€ä¼š Linux<span class="chineselangcomma">ï¼Œ</span>å†æ¢ Windows ç©ç©<span class="chineselangcomma">ï¼Œ</span>è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„<span class="chineselangcomma">ï¼Œ</span>åªè¦ä¿è¯è¿è¡Œæ–°çš„å®ä¾‹ä¹‹å‰å·²ç»å½»åº•å…³é—­(Terminate)æ—§çš„å®ä¾‹<span class="chineselangstop">ã€‚</span>å¦å¤–EC2 åªæ˜¯ AWS å…è´¹å¥—é¤çš„ï¼ˆä¸‰åå…­åˆ†ä¹‹ï¼‰ä¸€éƒ¨åˆ†<span class="chineselangcomma">ï¼Œ</span>å…¶ä»–å…è´¹èµ„æºç”¨èµ·æ¥å•Šï¼</p><ol start="3"><li><p>æ‰£è´¹1ï¼šæˆ‘ç¬¬ä¸€æ¬¡æ¥åˆ°è­¦æŠ¥é‚®ä»¶æ˜¯æˆ‘çš„å·å­˜å‚¨è¶…å‡ºäº†å…è´¹å¥—é¤çš„85%<span class="chineselangstop">ã€‚</span>åé¢å‘ç°æ˜¯å› ä¸ºæˆ‘ä¹‹å‰åˆ›å»ºäº†ä¸€ä¸ªEC2å®ä¾‹<span class="chineselangcomma">ï¼Œ</span>ç»™è¿™ä¸ªå®ä¾‹å¢åŠ äº†ä¸€ä¸ªå·<span class="chineselangcomma">ï¼Œ</span>ç”¨å®Œä¹‹åæˆ‘å°±æŠŠè¿™ä¸ªå®ä¾‹stopäº†<span class="chineselangstop">ã€‚</span>æˆ‘ä»¥ä¸ºstopæ‰å°±ä¸ä¼šæ‰£è´¹äº†<span class="chineselangcomma">ï¼Œ</span>ä½†æ˜¯å‘ç°<span class="chineselangcomma">ï¼Œ</span>å³ä½¿ä½ æŠŠEC2å®ä¾‹stopäº†<span class="chineselangcomma">ï¼Œ</span>ä½†æ˜¯ä½ è¿™ä¸ªå®ä¾‹ç”¨çš„é‚£ä¸ªå·è¿˜æ˜¯åœ¨ä½¿ç”¨çŠ¶æ€<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥å¯¼è‡´è¶…é¢<span class="chineselangstop">ã€‚</span>åæ¥æˆ‘æŠŠé‚£ä¸ªEC2å®ä¾‹ç»ˆæ­¢æ‰<span class="chineselangcomma">ï¼Œ</span>ç»ˆæ­¢çš„æ—¶å€™æŠŠè¿™ä¸ªå·ä¹Ÿé‡Šæ”¾æ‰å°±å¥½äº†<span class="chineselangstop">ã€‚</span></p></li><li><blockquote><p>EC2ç‰¹ç‚¹ä¹‹ä¸€æ˜¯å…è®¸ç”¨æˆ·éšæ—¶æ›´æ–°å®ä¾‹çŠ¶æ€<span class="chineselangcomma">ï¼Œ</span>ç”¨æˆ·å¯ä»¥éšæ—¶åŠ å…¥æˆ–åˆ é™¤å®ä¾‹<span class="chineselangcomma">ï¼Œ</span>å®ä¾‹çŠ¶æ€çš„åŠ¨æ€å˜åŒ–æ–¹ä¾¿äº†ç”¨æˆ·<span class="chineselangcomma">ï¼Œ</span>ä½†æ˜¯å´ç»™é˜²ç«å¢™çš„é…ç½®å¸¦æ¥äº†éº»çƒ¦<span class="chineselangstop">ã€‚</span></p></blockquote></li></ol><p>å› æ­¤<strong>EC2é‡Œçš„VPSæ˜¯æ²¡æœ‰é˜²ç«å¢™(firewalld)çš„<span class="chineselangcomma">ï¼Œ</span>æµé‡ç®¡ç†é€šè¿‡å®‰å…¨ç»„çš„å‡ºç«™å…¥ç«™è§„åˆ™å®Œæˆ</strong><br>ï¼ˆå½“ç„¶ä½ åƒé¥±äº†ä¹Ÿå¯ä»¥è‡ªå·±è£…ä¸ªé˜²ç«å¢™(<code>ubuntu</code>)ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install firewalld</span><br><span class="line">sudo systemctl start firewalld</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> firewalld</span><br><span class="line">sudo systemctl status firealld</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --auto-remove firewalld <span class="comment">#å¸è½½</span></span><br></pre></td></tr></table></figure><ol start="5"><li><blockquote><p>è¿™é‡Œæ˜¯å®˜ç½‘çš„ä»‹ç»:</p></blockquote></li></ol><blockquote><p><strong>æ— æ³•å¯¹å®ä¾‹æ‰§è¡Œpingæ“ä½œ</strong><br>è¯´å¾—å¾ˆè¯¦ç»†<span class="chineselangcomma">ï¼Œ</span>ç®€å•æ¥è¯´å°±æ˜¯å¦‚æœä½ æƒ³pingé€šEC2å®ä¾‹çš„è¯éœ€è¦å•ç‹¬è®¾ç½®å…¥ç«™è§„åˆ™<span class="chineselangstop">ã€‚</span><br>æ€ä¹ˆè®¾ç½®å‘¢?<br>åœ¨EC2 Dashboardé€‰æ‹©å®‰å…¨ç»„é€‰é¡¹å¡<span class="chineselangcomma">ï¼Œ</span>é€‰ä¸­è¦ä¿®æ”¹çš„å®‰å…¨ç»„é€‰æ‹©å…¥ç«™è§„åˆ™(Inbound)-ç¼–è¾‘-æ·»åŠ è§„åˆ™<br>ç±»å‹é€‰æ‹©è‡ªå®šä¹‰ICMPè§„åˆ™<span class="chineselangcomma">ï¼Œ</span><br>é€‰æ‹©è¯·æ±‚(Echo Request)<span class="chineselangcomma">ï¼Œ</span><br>æ¥æºé€‰æ‹©ä»»ä½•ä½ç½®<span class="chineselangstop">ã€‚</span><br>ç„¶åç‚¹å‡»ä¿å­˜<span class="chineselangcomma">ï¼Œ</span>å°±å¯ä»¥Pingå°±èƒ½pingé€šäº†<br><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><span class="chineselangdash">â€”â€”</span><br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/daerzei/article/details/81169349">https://blog.csdn.net/daerzei/article/details/81169349</a></p></blockquote><ol start="6"><li>å®‰å…¨ç»„ï¼š<br>åœ¨ <strong>Inbound</strong> é€‰é¡¹å¡ä¸Š<span class="chineselangcomma">ï¼Œ</span>åˆ›å»ºä»¥ä¸‹è§„åˆ™ (ä¸ºæ¯ä¸ªæ–°è§„åˆ™é€‰æ‹© <strong>Add Rule</strong>)<span class="chineselangcomma">ï¼Œ</span>ç„¶åé€‰æ‹© <strong>Create</strong>ï¼š</li></ol><ul><li><p>ä» <strong>Type</strong> åˆ—è¡¨ä¸­é€‰æ‹© <strong>HTTP</strong><span class="chineselangcomma">ï¼Œ</span>ç¡®ä¿ <strong>Source</strong> è®¾ç½®ä¸º <strong>Anywhere</strong> (<code>0.0.0.0/0</code>)<span class="chineselangstop">ã€‚</span></p></li><li><p>ä» <strong>Type</strong> åˆ—è¡¨ä¸­é€‰æ‹© <strong>HTTPS</strong><span class="chineselangcomma">ï¼Œ</span>ç¡®ä¿ <strong>Source</strong> è®¾ç½®ä¸º <strong>Anywhere</strong> (<code>0.0.0.0/0</code>)<span class="chineselangstop">ã€‚</span></p></li><li><p>ä» <strong>Type</strong> åˆ—è¡¨ä¸­é€‰æ‹© <strong>SSH</strong><span class="chineselangstop">ã€‚</span>åœ¨<strong>æº</strong>æ¡†ä¸­<span class="chineselangcomma">ï¼Œ</span>é€‰æ‹© <strong>My IP</strong> ä»¥ä¾¿ä½¿ç”¨æœ¬åœ°è®¡ç®—æœºçš„å…¬æœ‰ IPv4 åœ°å€è‡ªåŠ¨å¡«å……è¯¥å­—æ®µ<span class="chineselangstop">ã€‚</span>æˆ–è€…<span class="chineselangcomma">ï¼Œ</span>é€‰æ‹©<strong>è‡ªå®šä¹‰</strong>å¹¶ç”¨ CIDR è¡¨ç¤ºæ³•æŒ‡å®šè®¡ç®—æœºçš„å…¬æœ‰ IPv4 åœ°å€æˆ–ç½‘ç»œ<span class="chineselangstop">ã€‚</span>è¦é‡‡ç”¨ CIDR è¡¨ç¤ºæ³•æŒ‡å®šå•ä¸ª IP åœ°å€<span class="chineselangcomma">ï¼Œ</span>è¯·æ·»åŠ è·¯ç”±å‰ç¼€ <code>/32</code><span class="chineselangcomma">ï¼Œ</span>ä¾‹å¦‚ <code>203.0.113.25/32</code><span class="chineselangstop">ã€‚</span>å¦‚æœæ‚¨çš„å…¬å¸è¦åˆ†é…åŒä¸€èŒƒå›´å†…çš„åœ°å€<span class="chineselangcomma">ï¼Œ</span>è¯·æŒ‡å®šæ•´ä¸ªèŒƒå›´<span class="chineselangcomma">ï¼Œ</span>ä¾‹å¦‚ <code>203.0.113.0/24</code><span class="chineselangstop">ã€‚</span></p></li><li><p><strong>è­¦å‘Š</strong></p><p>å‡ºäºå®‰å…¨åŸå› <span class="chineselangcomma">ï¼Œ</span>æˆ‘ä»¬ä¸å»ºè®®æ‚¨å…è®¸ä»æ‰€æœ‰ IPv4 åœ°å€ (<code>0.0.0.0/0</code>) å¯¹æ‚¨çš„å®ä¾‹è¿›è¡Œ SSH è®¿é—®ï¼ˆä»¥æµ‹è¯•ä¸ºç›®çš„çš„çŸ­æš‚è®¿é—®é™¤å¤–ï¼‰<span class="chineselangstop">ã€‚</span></p></li></ul><ol start="7"><li>å¼¹æ€§ IP åœ°å€ æ˜¯ä¸“ä¸ºåŠ¨æ€äº‘è®¡ç®—è®¾è®¡çš„é™æ€ IPv4 åœ°å€<span class="chineselangstop">ã€‚</span>å¼¹æ€§ IP åœ°å€ä¸æ‚¨çš„ AWS è´¦æˆ·å…³è”<span class="chineselangstop">ã€‚</span>å€ŸåŠ©å¼¹æ€§ IP åœ°å€<span class="chineselangcomma">ï¼Œ</span>æ‚¨å¯ä»¥å¿«é€Ÿå°†åœ°å€é‡æ–°æ˜ å°„åˆ°æ‚¨çš„è´¦æˆ·ä¸­çš„å¦ä¸€ä¸ªå®ä¾‹<span class="chineselangcomma">ï¼Œ</span>ä»è€Œå±è”½å®ä¾‹æ•…éšœ<span class="chineselangstop">ã€‚</span></li></ol><p>å¼¹æ€§ IP åœ°å€æ˜¯å…¬æœ‰ IPv4 åœ°å€<span class="chineselangcomma">ï¼Œ</span>å¯é€šè¿‡ Internet è®¿é—®<span class="chineselangstop">ã€‚</span>å¦‚æœæ‚¨çš„å®ä¾‹æ²¡æœ‰å…¬æœ‰ IPv4 åœ°å€<span class="chineselangcomma">ï¼Œ</span>åˆ™å¯ä»¥å°†å¼¹æ€§ IP åœ°å€ä¸æ‚¨çš„å®ä¾‹å…³è”ä»¥å¯ç”¨ä¸ Internet çš„é€šä¿¡ï¼›ä¾‹å¦‚<span class="chineselangcomma">ï¼Œ</span>ä»æœ¬åœ°è®¡ç®—æœºè¿æ¥åˆ°æ‚¨çš„å®ä¾‹<span class="chineselangstop">ã€‚</span></p></blockquote><h2 id="ç”¨student-developer-pack">ç”¨student developer pack</h2><h3 id="ç”¨å­¦ç”ŸåŒ…å¯ä»¥å«–åˆ°ä»€ä¹ˆï¼Ÿ">ç”¨å­¦ç”ŸåŒ…å¯ä»¥å«–åˆ°ä»€ä¹ˆï¼Ÿ</h3><p>office education</p><p>azure ä¸€å¹´ 30 åˆ€ï¼ˆå›½å†…ï¼‰</p><p>Jetbrains å…¨å®¶æ¡¶<span class="chineselangcomma">ï¼Œ</span>Mosek</p><blockquote><p>å¾®è½¯çš„ Dream Spark ä¹Ÿæä¾›äº† Github å­¦ç”Ÿç¤¼åŒ…<span class="chineselangcomma">ï¼Œ</span>ä½†æ˜¯ç›¸æ¯”äº Github é‚£ä¹ˆä¸¥æ ¼<span class="chineselangcomma">ï¼Œ</span>è´¢å¤§æ°”ç²—çš„å¾®è½¯æ˜¾ç„¶æœ‰é’±ä»»æ€§å¾ˆå¤š<span class="chineselangcomma">ï¼Œ</span><a target="_blank" rel="noopener" href="http://xn--4gqqsn78jdnl3la.edu.cn/">ä¸€èˆ¬ä»…é€šè¿‡.edu.cn</a> çš„é‚®ç®±å°±å¯ä»¥å®Œæˆç”³è¯·<span class="chineselangcomma">ï¼Œ</span>ç„¶åå†é€šè¿‡ Dream Spark ç”³è¯· Github <span class="chineselangstop">ã€‚</span></p><p>åŒæ—¶å®‰åˆ©ä¸€ä¸‹ Dream Spark <span class="chineselangcomma">ï¼Œ</span>ä»·å€¼æ•°åƒå…ƒçš„ Xamarin å…è´¹é€<span class="chineselangcomma">ï¼Œ</span>ç®€ç›´ä¸šç•Œè‰¯å¿ƒï¼</p></blockquote><blockquote><p>æˆ‘å°±æ˜¯ç”¨github çš„å­¦ç”Ÿå¥—é¤<span class="chineselangcomma">ï¼Œ</span>å…¥äº†digitaloceançš„å‘</p><p>è¿™ä¸ªæ˜¯æˆ‘çš„åˆ†äº«ç»™ä½ çš„é“¾æ¥<span class="chineselangcomma">ï¼Œ</span><a href="https://link.zhihu.com/?target=https%3A//m.do.co/c/29cad176e9ad">DigitalOcean: Cloud Computing, Simplicity at Scale</a></p><p>æ³¨å†Œä¼šé€10åˆ€ï¼ˆæˆ‘ä¹Ÿä¼šæœ‰10åˆ€ï¼‰<span class="chineselangcomma">ï¼Œ</span>å‘Šè¯‰å®¢æœä½ çš„githubä¼˜æƒ åˆ¸å·ç <span class="chineselangcomma">ï¼Œ</span>ç„¶åè¿™æ ·ä½ å°±ä¼šå¾—åˆ°50åˆ€çš„ä¼˜æƒ <span class="chineselangcomma">ï¼Œ</span>åŠ ä¸Šä½ æ³¨å†Œçš„æ—¶å€™çš„5åˆ€çš„éªŒè¯<span class="chineselangcomma">ï¼Œ</span>ä½ è´¦æˆ·æ€»å…±æœ‰65åˆ€<span class="chineselangcomma">ï¼Œ</span>è¿™æ ·çš„è¯ä½ å¯ä»¥å…è´¹ç”¨ä¸€å¹´çš„5åˆ€çš„vps<span class="chineselangstop">ã€‚</span></p><p>ç”¨5ç¾å…ƒä¸€ä¸ªæœˆçš„æœåŠ¡å™¨<span class="chineselangcomma">ï¼Œ</span>è‡ªå·±æ­å»ºä¸€ä¸ªVPN æ¥ç©ç©<span class="chineselangcomma">ï¼Œ</span>é€Ÿåº¦éå¸¸å¿«<span class="chineselangcomma">ï¼Œ</span>ä¸Štumblrå–æ±¤çš„æ—¶å€™<span class="chineselangcomma">ï¼Œ</span>æœ€é«˜èƒ½6Mæ¯ç§’<span class="chineselangcomma">ï¼Œ</span>è¿™æ˜¯æˆ‘ç”¨æŠ€æœ¯ä¼˜åŒ–çš„ç»“æœ<span class="chineselangcomma">ï¼Œ</span>å¦‚æœä¸ä¼˜åŒ–çš„å¹³å‡100kbæ¯ç§’<span class="chineselangstop">ã€‚</span>ï¼ˆå…·ä½“æ€ä¹ˆä¼˜åŒ–<span class="chineselangcomma">ï¼Œ</span>è‡ªå·±googleï¼‰<span class="chineselangcomma">ï¼Œ</span>ç§’å¼€youtube.</p></blockquote><blockquote><p>AWS ä½œä¸º IaaS å¹³å°,æœ‰å¾ˆå¤šå¾ˆæœ‰æ„æ€çš„æœåŠ¡,å¦‚,è¢«ç‚’å†·é¥­çš„å¾®æœåŠ¡(Microservices)çš„å„¿å­æ— æœåŠ¡(Serverless).<br>50 åˆ€å¯ä»¥å­¦ä¹ åŸºäº AWS çš„åŸºç¡€æœåŠ¡æ¶æ„,å»äº†è§£è¿™äº›åŸºç¡€æ¶æ„æŠ€æœ¯,å¯¹è‡ªå·±çš„æŠ€æœ¯è§†é‡æœ‰å¾ˆé«˜çš„æé«˜.</p></blockquote><h3 id="AWSå­¦ç”ŸåŒ…ï¼ˆä¸éœ€è¦å›½é™…ä¿¡ç”¨å¡ï¼ï¼‰">AWSå­¦ç”ŸåŒ…ï¼ˆä¸éœ€è¦å›½é™…ä¿¡ç”¨å¡ï¼ï¼‰</h3><ul><li><p><strong>us-east-1æ˜¯AWSå­¦ç”Ÿç‰ˆè´¦å·å”¯ä¸€èƒ½é€‰æ‹©çš„åŒºåŸŸ</strong>,ç”±äºè·ç¦»é¥è¿œ,ç½‘ç»œé€šè¿‡å±‚å±‚è½¬å‘,å¯èƒ½å¹¶ä¸æ˜¯å¾ˆå¥½</p></li><li><p>å­¦ç”ŸåŒ…ä½¿ç”¨çš„æ˜¯IAMçš„éç®¡ç†å‘˜æˆæƒè´¦æˆ·<span class="chineselangcomma">ï¼Œ</span>ä½ è¿è‡ªå·±çš„billingéƒ½ä¸èƒ½æŸ¥çœ‹ï¼åªèƒ½çœ‹ç€é’±ä¸€ç‚¹ç‚¹å‡å°‘â€¦â€¦</p></li><li><p>å­¦ç”ŸåŒ…çš„è´¦æˆ·ä¼¼ä¹ä¸èƒ½äº«å—AWSçš„å¤´ä¸€å¹´å…è´¹æ”¿ç­–ï¼ï¼ï¼ï¼ğŸ˜ </p></li><li><p>EBSå¿…é¡»æ¯”å¿«ç…§å¤§å°å¤§<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥æœ€å°8G<span class="chineselangcomma">ï¼Œ</span>EBSåœ¨æ‰£é’±å°±åœ¨ğŸ˜  å¼¹æ€§IPå•¥çš„ä¹Ÿä¸æ˜¯å…è´¹çš„ï¼ï¼</p></li><li><p>æµå…¥AWSçš„æµé‡å®Œå…¨æ˜¯å…è´¹çš„<span class="chineselangcomma">ï¼Œ</span>ä½†æ¯æœˆçš„å…è´¹æµå‡ºæµé‡åªæœ‰15G<span class="chineselangcomma">ï¼Œ</span>è¶…å‡ºéƒ¨åˆ†å°±è¦æ”¶è´¹äº†<span class="chineselangstop">ã€‚</span><br><br></p></li></ul><h3 id="ç”³è¯·å…è´¹åŸŸå"><a target="_blank" rel="noopener" href="https://my.freenom.com">ç”³è¯·å…è´¹åŸŸå</a></h3><blockquote><p>freenom æä¾›äº†tk<span class="chineselangpause">ã€</span>ml<span class="chineselangpause">ã€</span>ga<span class="chineselangpause">ã€</span>cf<span class="chineselangpause">ã€</span>gq è¿™å‡ ç±»åç¼€çš„å…è´¹åŸŸå<span class="chineselangstop">ã€‚</span>tkåŸŸå<span class="chineselangcomma">ï¼Œ</span>æ„ä¸º Talkerï¼ˆè¯´è¯çš„äººï¼‰<span class="chineselangstop">ã€‚</span>.tkåŸŸåæ˜¯å—å¤ªå¹³æ´‹å²›å›½æ‰˜å…‹åŠ³çš„é¡¶çº§åŸŸå, .ml æ˜¯éæ´²å›½å®¶é©¬é‡Œçš„åç¼€, .ga åŸŸåä¸ºåŠ è“¬å›½å®¶é¡¶çº§åŸŸååç¼€, .cf æ˜¯ä¸­éå…±å’Œå›½çš„åç¼€, .gqåŸŸåæ˜¯èµ¤é“å‡ å†…äºšå›½å®¶åœ°åŒºé¡¶çº§åŸŸå<span class="chineselangstop">ã€‚</span></p></blockquote><blockquote><p>è¿›å…¥<code>Nameservers</code>é¡µé¢<span class="chineselangcomma">ï¼Œ</span>æ›´æ”¹DNSè§£æåˆ°å›½å†…çš„<a target="_blank" rel="noopener" href="https://www.dnspod.cn/">DNSPod</a>ï¼ˆæé€Ÿï¼‰</p><p>åœ¨DNSPodä¸­æ·»åŠ åˆšåˆšæ³¨å†Œçš„åŸŸå(ä¸ç”¨å¡«www)</p><p><a target="_blank" rel="noopener" href="https://console.dnspod.cn/dns/yukkuri.tk/set">https://console.dnspod.cn/dns/yukkuri.tk/set</a></p><p>ä¹‹åå›åˆ°Freenom<span class="chineselangcomma">ï¼Œ</span>åœ¨Nameserversä¸­å¡«å†™DNSPodçš„ä¸¤ä¸ªDNSåœ°å€ <code>f1g1ns1.dnspod.net</code><span class="chineselangpause">ã€</span> <code>f1g1ns2.dnspod.net</code></p><ul><li><p>A</p><p>A è®°å½•æ˜¯æœ€å¸¸ç”¨ç±»å‹<span class="chineselangcomma">ï¼Œ</span>å°†åŸŸåæŒ‡å‘ä¸€ä¸ª IPv4 åœ°å€<span class="chineselangcomma">ï¼Œ</span>å¦‚ 8.8.8.8</p></li><li><p>CNAME</p><p>å°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸååœ°å€<span class="chineselangcomma">ï¼Œ</span>ä¸å…¶ä¿æŒç›¸åŒè§£æ<span class="chineselangcomma">ï¼Œ</span>å¦‚ <a target="_blank" rel="noopener" href="https://www.dnspod.cn">https://www.dnspod.cn</a></p></li></ul></blockquote><h2 id="VPSé…ç½®">VPSé…ç½®</h2><p>ä½¿ç”¨çš„æ˜¯Ubuntu 18.4 tls</p><h3 id="UbuntuåŸºç¡€">UbuntuåŸºç¡€</h3><h4 id="ç”¨sshè¿æ¥åˆ°Ubuntu">ç”¨sshè¿æ¥åˆ°Ubuntu</h4><p>ä½¿ç”¨çš„è½¯ä»¶æ˜¯xshell<span class="chineselangpause">ã€</span>xftp**ï¼ˆæ³¨æ„xftpä¸èƒ½ç™»å½•rootè´¦æˆ·<span class="chineselangcomma">ï¼Œ</span>è®°å¾—å¼€æ”¾ç›¸åº”æƒé™ï¼‰**ä¸ªäººç‰ˆ<span class="chineselangstop">ã€‚</span>é€šè¿‡äºšé©¬é€Šçš„public key / user key <code>.pem</code>ç™»å½•</p><p>é™„ï¼šæ–‡ä»¶å¤¹æƒé™çš„å¼€æ”¾æ–¹æ³•</p><blockquote><p>ä¿®æ”¹æ–‡ä»¶å¤¹çš„å±æ€§ æ”¹ä¸º777 è¿™ä¸ªæ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨<br>777è¿™ä¸ªå±æ€§ å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•çš„æ–‡ä»¶æ‹¥æœ‰è€…æƒé™è®¾ç½®ä¸ºè¯»<span class="chineselangpause">ã€</span>å†™<span class="chineselangpause">ã€</span>å¯æ‰§è¡Œ<span class="chineselangcomma">ï¼Œ</span>æ–‡ä»¶æ‹¥æœ‰è€…æ‰€åœ¨çš„ç”¨æˆ·ç»„æˆå‘˜å…·å¤‡è¯»<span class="chineselangpause">ã€</span>å†™<span class="chineselangpause">ã€</span>å¯æ‰§è¡Œæƒé™<span class="chineselangcomma">ï¼Œ</span>å…¶å®ƒç”¨æˆ·ä¹Ÿå…·å¤‡è¯»<span class="chineselangpause">ã€</span>å†™<span class="chineselangpause">ã€</span>å¯æ‰§è¡Œæƒé™</p><p>å‘½ä»¤ï¼š <code>chmod 777 filename</code> ï¼ˆrootæƒé™ä¸‹ï¼‰</p><p>è¿™æ ·è¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé«˜äº® è¿™ä¸ªæ—¶å€™åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œä¼ è¾“æ•°æ®äº†</p><p>2.æŠŠæ–‡ä»¶å¤¹æƒé™èµ‹äºˆç»™æŸä¸ªè´¦æˆ·</p><p>å¦‚ï¼š<code>chown -R user_1 home</code></p><p>å°±æ˜¯æŠŠ homeæ–‡ä»¶å¤¹çš„æƒé™ç»™äº† user_1 è¿™æ ·å°±å¯ä»¥ä¼ é€’æ•°æ®äº† ä¸è¿‡ä¸èƒ½ä¿è¯è¿™ä¸ªuser_1 ç”¨æˆ·å¯¹homeç›®å½•çš„æƒé™</p></blockquote><h4 id="Ubuntuç³»ç»ŸæœåŠ¡å™¨è·å–rootæƒé™">Ubuntuç³»ç»ŸæœåŠ¡å™¨è·å–rootæƒé™</h4><p>ubuntuçš„é»˜è®¤è´¦æˆ·ubuntuå’Œrootè´¦æˆ·ä¸éœ€è¦åˆ›å»º</p><p>æ–°æœºå­åº”è¯¥å…ˆè®¾rootå¯†ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure><p>å†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line"><span class="comment">#æ¥ç€è¾“å…¥è®¾ç½®çš„å¯†ç å°±è¡Œ</span></span><br></pre></td></tr></table></figure><h4 id="æ›´æ”¹UbuntuæœåŠ¡å™¨æ—¶é—´">æ›´æ”¹UbuntuæœåŠ¡å™¨æ—¶é—´</h4><blockquote><p><strong>æ ¡éªŒæ—¶é—´</strong></p><p>å¯¹äº V2Ray<span class="chineselangcomma">ï¼Œ</span>å®ƒçš„éªŒè¯æ–¹å¼åŒ…å«æ—¶é—´<span class="chineselangcomma">ï¼Œ</span>å°±ç®—æ˜¯é…ç½®æ²¡æœ‰ä»»ä½•é—®é¢˜<span class="chineselangcomma">ï¼Œ</span>å¦‚æœæ—¶é—´ä¸æ­£ç¡®<span class="chineselangcomma">ï¼Œ</span>ä¹Ÿæ— æ³•è¿æ¥ V2Ray æœåŠ¡å™¨çš„<span class="chineselangcomma">ï¼Œ</span>æœåŠ¡å™¨ä¼šè®¤ä¸ºä½ è¿™æ˜¯ä¸åˆæ³•çš„è¯·æ±‚<span class="chineselangstop">ã€‚</span>æ‰€ä»¥ç³»ç»Ÿæ—¶é—´ä¸€å®šè¦æ­£ç¡®<span class="chineselangcomma">ï¼Œ</span>åªè¦ä¿è¯æ—¶é—´è¯¯å·®åœ¨<strong>ä¸€åˆ†é’Ÿ</strong>ä¹‹å†…å°±æ²¡é—®é¢˜<span class="chineselangstop">ã€‚</span></p><p>å¯¹äº VPS(Linux) å¯ä»¥æ‰§è¡Œå‘½ä»¤ <code>date -R</code> æŸ¥çœ‹æ—¶é—´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ date -RSun, 01 Jul 2018 21:57:05 -0400</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸­çš„ -0400 ä»£è¡¨çš„æ˜¯æ—¶åŒºä¸ºè¥¿4åŒº<span class="chineselangcomma">ï¼Œ</span>å¦‚æœè½¬æ¢æˆä¸œ 8 åŒº(+0800)æ—¶é—´åˆ™ä¸º <code>2018-07-2 09:57:05</code><span class="chineselangstop">ã€‚</span></p><p>å¦‚æœæ—¶é—´ä¸å‡†ç¡®<span class="chineselangcomma">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ <code>date --set</code> ä¿®æ”¹æ—¶é—´<span class="chineselangcomma">ï¼Œ</span>æˆ–è€…ä½¿ç”¨ntpdateä¸ntpæœåŠ¡å™¨åŒæ­¥<span class="chineselangstop">ã€‚</span></p></blockquote><h4 id="ubuntu-viç¼–è¾‘å™¨">ubuntu viç¼–è¾‘å™¨</h4><p>å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/caddy.service <span class="comment">#sudoå³ä»¥ç®¡ç†å‘˜æƒé™æ‰§è¡Œä¸€äº›ä»»åŠ¡&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;viæ˜¯è‡ªå¸¦ç¼–è¾‘å™¨</span></span><br></pre></td></tr></table></figure><p>æŒ‰<kbd>i</kbd>è¿›å…¥insertç¼–è¾‘æ¨¡å¼</p><p>æŒ‰<kbd>esc</kbd>é€€å‡ºç¼–è¾‘æ¨¡å¼</p><ul><li><kbd>:wq</kbd>ä¿å­˜åç¦»å¼€</li><li><kbd>:qa</kbd>æ”¾å¼ƒæ‰€æœ‰ç¼–è¾‘å†…å®¹ç¦»å¼€</li><li>åŠ <kbd>!</kbd>åç¼€è¡¨ç¤ºå¼ºåˆ¶æ‰§è¡Œ</li></ul><h4 id="ubuntu-åˆ é™¤-span-class-chineselangpause-ã€-span-æ–°å»ºâ€¦â€¦">ubuntu åˆ é™¤<span class="chineselangpause">ã€</span>æ–°å»ºâ€¦â€¦</h4><p>ç™¾åº¦</p><h3 id="v2rayåŠcaddyå®‰è£…">v2rayåŠcaddyå®‰è£…</h3><p>v2ray: <sup>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.rultr.com/tutorials/proxy/2268.html">https://www.rultr.com/tutorials/proxy/2268.html</a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…v2rayéœ€è¦çš„ä¸€äº›ä¸œè¥¿<span class="chineselangcomma">ï¼Œ</span>æŸäº›ä¸œè¥¿çš„å®‰è£…éœ€è¦rootæƒé™<span class="chineselangcomma">ï¼Œ</span>æ³¨æ„</p><blockquote><p>è¿™ä¸ªè„šæœ¬ä¼šé…ç½®è‡ªåŠ¨è¿è¡Œè„šæœ¬<span class="chineselangstop">ã€‚</span>è‡ªåŠ¨è¿è¡Œè„šæœ¬ä¼šåœ¨ç³»ç»Ÿé‡å¯ä¹‹å<span class="chineselangcomma">ï¼Œ</span>è‡ªåŠ¨è¿è¡Œ V2Ray<span class="chineselangstop">ã€‚</span>ç›®å‰è‡ªåŠ¨è¿è¡Œè„šæœ¬åªæ”¯æŒå¸¦æœ‰ Systemd çš„ç³»ç»Ÿ<span class="chineselangcomma">ï¼Œ</span>ä»¥åŠ Debian / Ubuntu å…¨ç³»åˆ—<span class="chineselangstop">ã€‚</span></p></blockquote><p>å¦‚æœæç¤º curl: command not found <span class="chineselangcomma">ï¼Œ</span>é‚£æ˜¯å› ä¸ºä½ çš„ VPS æ²¡è£… Curl</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update -y &amp;&amp; apt-get install curl -y <span class="comment">#å³å¯</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ç½‘ä¸Šæœ‰äººå†™äº†v2rayçš„æ“ä½œè„šæœ¬<span class="chineselangcomma">ï¼Œ</span>å¯ä»¥åœ¨å‘½ä»¤è¡Œé€šè¿‡v2ray infoä¹‹ç±»çš„å‘½ä»¤ç›´æ¥è¿›è¡Œæ“ä½œ<span class="chineselangstop">ã€‚</span>æˆ‘æ²¡ç”¨<span class="chineselangstop">ã€‚</span></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl start v2ray</span><br><span class="line">systemctl stop v2ray</span><br><span class="line">systemctl restart v2ray</span><br><span class="line">systemctl status v2ray</span><br><span class="line"><span class="comment">#å¸è½½</span></span><br><span class="line">./go.sh --remove</span><br></pre></td></tr></table></figure><p><br><br><br></p><p>caddy: <sup>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000018242765">https://segmentfault.com/a/1190000018242765</a></sup></p><p><strong>æ³¨æ„<span class="chineselangcomma">ï¼Œ</span>è¿™é‡Œæ˜¯é€šè¿‡æ–°å»ºä¸€ç”¨æˆ·åä¸ºcaddyçš„ç”¨æˆ·æ¥è¿›è¡Œç®¡ç†<span class="chineselangcomma">ï¼Œ</span>éœ€è¦æ›´æ”¹caddy.serviceæ–‡ä»¶çš„ç›¸åº”å†…å®¹</strong><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://getcaddy.com | bash -s personal</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å®‰è£…ä½ç½®</span></span><br><span class="line"><span class="built_in">which</span> caddy</span><br><span class="line"><span class="comment">#è¾“å‡º /usr/local/bin/caddy</span></span><br><span class="line"><span class="comment">#å‡ºäºå®‰å…¨è€ƒè™‘&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;åˆ‡å‹¿ä»¥rootèº«ä»½è¿è¡ŒCaddyäºŒè¿›åˆ¶æ–‡ä»¶&lt;span class=&#x27;chineselangstop&#x27;&gt;ã€‚&lt;/span&gt; ä¸ºäº†è®©Caddyèƒ½å¤Ÿä»¥érootç”¨æˆ·èº«ä»½ç»‘å®šåˆ°ç‰¹æƒç«¯å£ï¼ˆä¾‹å¦‚80,443ï¼‰&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;æ‚¨éœ€è¦è¿è¡Œsetcapå‘½ä»¤&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;å¦‚ä¸‹æ‰€ç¤º</span></span><br><span class="line">sudo <span class="built_in">setcap</span> <span class="string">&#x27;cap_net_bind_service=+ep&#x27;</span> /usr/<span class="built_in">local</span>/bin/caddy <span class="comment">#ä¸è¾“å‡ºç›¸ç¬¦çš„åœ°å€</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸ºCaddyåˆ›å»ºä¸€ä¸ªä¸“ç”¨çš„ç³»ç»Ÿç”¨æˆ·ï¼šcaddyå’Œä¸€ç»„åŒåçš„ç”¨æˆ·ï¼š</span></span><br><span class="line">sudo useradd -r -d /var/www -M -s /sbin/nologin caddy</span><br><span class="line"><span class="comment">#æ³¨æ„ï¼šæ­¤å¤„åˆ›å»ºçš„ç”¨æˆ·caddyåªèƒ½ç”¨äºç®¡ç†CaddyæœåŠ¡&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;ä¸èƒ½ç”¨äºç™»å½•&lt;span class=&#x27;chineselangstop&#x27;&gt;ã€‚&lt;/span&gt;</span></span><br><span class="line"><span class="comment">#ä¸ºCaddy WebæœåŠ¡å™¨åˆ›å»ºä¸»ç›®å½•/ var / www&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;ä¸ºæ‚¨çš„ç«™ç‚¹åˆ›å»ºä¸»ç›®å½•/var/www/example.comï¼š</span></span><br><span class="line">sudo mkdir -p /var/www/example.com</span><br><span class="line">sudo chown -R caddy:caddy /var/www</span><br><span class="line"><span class="comment">#åˆ›å»ºå­˜å‚¨SSLè¯ä¹¦çš„ç›®å½•ï¼š</span></span><br><span class="line">sudo mkdir /etc/ssl/caddy</span><br><span class="line">sudo chown -R caddy:root /etc/ssl/caddy</span><br><span class="line">sudo chmod 0770 /etc/ssl/caddy</span><br><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªä¸“ç”¨ç›®å½•æ¥å­˜å‚¨Caddyé…ç½®æ–‡ä»¶Caddyfileï¼š</span></span><br><span class="line">sudo mkdir /etc/caddy</span><br><span class="line">sudo chown -R root:caddy /etc/caddy</span><br></pre></td></tr></table></figure><h3 id="æ–°å»º-span-class-chineselangpause-ã€-span-ä¿®æ”¹V2ray-Caddyçš„é…ç½®æ–‡ä»¶">æ–°å»º<span class="chineselangpause">ã€</span>ä¿®æ”¹V2ray | Caddyçš„é…ç½®æ–‡ä»¶</h3><p><a target="_blank" rel="noopener" href="https://caddyserver.com/v1/tutorial/caddyfile">å®˜æ–¹å¯¹å¦‚ä½•ä¹¦å†™Caddyfileæ–‡ä»¶çš„ä»‹ç»</a></p><p><a target="_blank" rel="noopener" href="https://www.gitmemory.com/issue/ToutyRater/v2ray-guide/63/519485234"><strong>WebSocket+TLS+caddyæ–¹æ¡ˆå®¢æˆ·ç«¯ä¸€ç›´æŠ¥é”™</strong></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºåä¸ºCaddyfileçš„Caddyé…ç½®æ–‡ä»¶ï¼š</span></span><br><span class="line">sudo touch /etc/caddy/Caddyfile</span><br><span class="line">sudo chown caddy:caddy /etc/caddy/Caddyfile</span><br><span class="line">sudo chmod 444 /etc/caddy/Caddyfile</span><br><span class="line"><span class="comment"># teeå‘½ä»¤ç”¨äºå°†æ•°æ®é‡å®šå‘åˆ°æ–‡ä»¶&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;å¦ä¸€æ–¹é¢è¿˜å¯ä»¥æä¾›ä¸€ä»½é‡å®šå‘æ•°æ®çš„å‰¯æœ¬ä½œä¸ºåç»­å‘½ä»¤çš„stdin&lt;span class=&#x27;chineselangstop&#x27;&gt;ã€‚&lt;/span&gt;ç®€å•çš„è¯´å°±æ˜¯æŠŠæ•°æ®é‡å®šå‘åˆ°ç»™å®šæ–‡ä»¶å’Œå±å¹•ä¸Š&lt;span class=&#x27;chineselangstop&#x27;&gt;ã€‚&lt;/span&gt;</span></span><br><span class="line">cat &lt;&lt;EOF | sudo tee -a /etc/caddy/Caddyfile</span><br><span class="line">yukkuri.tk</span><br><span class="line">&#123;</span><br><span class="line">  root /var/www/yukkuri.tk/ <span class="comment">#æœåŠ¡å™¨å±•ç¤ºæ ¹ç›®å½•çš„index.htmlæ–‡ä»¶</span></span><br><span class="line">  gzip</span><br><span class="line">  <span class="built_in">log</span> /var/<span class="built_in">log</span>/caddy/caddy.log</span><br><span class="line">  tls lost@edfus.xyz</span><br><span class="line">  proxy /yukkuridoujinshi localhost:1234 &#123; </span><br><span class="line">    websocket</span><br><span class="line">    header_upstream -Origin</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /var/www/yukkuri.tk</span><br><span class="line">sudo chown -R caddy:caddy /var/www</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;h1&gt;Hello World!&lt;/h1&gt;&#x27;</span> | sudo tee /var/www/yukkuri.tk/index.html <span class="comment">#ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç½‘é¡µå†…å®¹</span></span><br></pre></td></tr></table></figure><p>å»ºè®®åœ¨ç”µè„‘è¿™è¾¹ç¼–è¾‘å¥½caddy.service<span class="chineselangcomma">ï¼Œ</span>å†ç”¨xftpå¤åˆ¶åˆ°å¯¹åº”ç›®å½•**ï¼ˆä»¥ä¸‹çš„éƒ½æ˜¯ï¼‰**</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir &#x2F;etc&#x2F;systemd&#x2F;system</span><br></pre></td></tr></table></figure><p>å†…å®¹å¦‚ä¸‹ï¼šï¼ˆç›¸å¯¹å®˜æ–¹æ–‡ä»¶åªæ›´æ”¹äº†Userå’ŒGroupçš„åç§°ï¼‰<sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup></p><pre style="height:200px;overflow:auto;white-space:pre-wrap">
[Unit]
Description=Caddy HTTP/2 web server
Documentation=https://caddyserver.com/docs
After=network-online.target
Wants=network-online.target systemd-networkd-wait-online.service
; Do not allow the process to be restarted in a tight loop. If the
; process fails to start, something critical needs to be fixed.
StartLimitIntervalSec=14400
StartLimitBurst=10
[Service]
Restart=on-abnormal
; User and group the process will run as.
User=caddy
Group=caddy
; Letsencrypt-issued certificates will be written to this directory.
Environment=CADDYPATH=/etc/ssl/caddy
; Always set "-root" to something safe in case it gets forgotten in the Caddyfile.
ExecStart=/usr/local/bin/caddy -log stdout -log-timestamps=false -agree=true -conf=/etc/caddy/Caddyfile -root=/var/tmp
ExecReload=/bin/kill -USR1 $MAINPID
; Use graceful shutdown with a reasonable timeout
KillMode=mixed
KillSignal=SIGQUIT
TimeoutStopSec=5s
; Limit the number of file descriptors; see `man systemd.exec` for more limit settings.
LimitNOFILE=1048576
; Unmodified caddy is not expected to use more than that.
LimitNPROC=512
; Use private /tmp and /var/tmp, which are discarded after caddy stops.
PrivateTmp=true
; Use a minimal /dev (May bring additional security if switched to 'true', but it may not work on Raspberry Pi's or other devices, so it has been disabled in this dist.)
PrivateDevices=false
; Hide /home, /root, and /run/user. Nobody will steal your SSH-keys.
ProtectHome=true
; Make /usr, /boot, /etc and possibly some more folders read-only.
ProtectSystem=full
; â€¦ except /etc/ssl/caddy, because we want Letsencrypt-certificates there.
;   This merely retains r/w access rights, it does not add any new. Must still be writable on the host!
ReadWritePaths=/etc/ssl/caddy
ReadWriteDirectories=/etc/ssl/caddy
; The following additional security directives only work with systemd v229 or later.
; They further restrict privileges that can be gained by caddy. Uncomment if you like.
; Note that you may have to add capabilities required by any plugins in use.
;CapabilityBoundingSet=CAP_NET_BIND_SERVICE
;AmbientCapabilities=CAP_NET_BIND_SERVICE
;NoNewPrivileges=true
[Install]
WantedBy=multi-user.target</pre><p><strong>å¼€æœºå¯åŠ¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start caddy.service</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> caddy.service</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®V2ray-config-json">è®¾ç½®V2ray/config.json</h3><blockquote><p><strong>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯<span class="chineselangcomma">ï¼Œ</span>JSONæ˜¯ä¸æ”¯æŒæ³¨é‡Šçš„<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥å¦‚æœéœ€è¦å¤åˆ¶é…ç½®æ–‡ä»¶<span class="chineselangcomma">ï¼Œ</span>è¯·åŠ¡å¿…åˆ é™¤<code>//</code>æ³¨é‡Š<span class="chineselangcomma">ï¼Œ</span>ä»¥å…é€ æˆé…ç½®æ–‡ä»¶é”™è¯¯<span class="chineselangstop">ã€‚</span>å¦å¤–json }å‰ä¸èƒ½åŠ ,ä¸”æ³¨æ„<span class="chineselangstop">ã€‚</span></strong></p></blockquote><ol start="2"><li><p>é…ç½®æ–‡ä»¶æ—¶çš„å®‰å…¨æ€§</p><blockquote><p>å¦å¤–<span class="chineselangcomma">ï¼Œ</span>æœ€å¥½ä¸è¦ç”¨<code>/ray</code>åšwebsocketè·¯å¾„<span class="chineselangcomma">ï¼Œ</span>æ¢ä¸ªå¤æ‚ç‚¹<span class="chineselangpause">ã€</span>éšæœºç‚¹çš„<span class="chineselangstop">ã€‚</span>è¦ä¸ºæŸå¢™çš„ä¸»åŠ¨æ£€æµ‹åšé˜²èŒƒ<span class="chineselangstop">ã€‚</span>(SSçš„é»˜è®¤ç«¯å£TCP/8388ä¾¿æ˜¯ä¸€ä¸ªå‰è½¦ä¹‹é‰´)</p></blockquote><p>æ‰€ä»¥æˆ‘pathçš„åç§°ç”¨çš„æ˜¯<code>/yukkuridoujinshi</code>XD æœåŠ¡å™¨ç«¯é…ç½®çš„ç«¯å£çš„è¯å› ä¸ºæ˜¯webç”¨httpsçš„443æ¥ä¼ªè£…<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥ä¸ç”¨ç®¡</p></li><li><p>æœåŠ¡ç«¯åŠå®¢æˆ·ç«¯config.jsoné…ç½®</p></li></ol><blockquote><p>æœåŠ¡ç«¯V2Rayçš„é…ç½®ä¸­å…³äºæ•°æ®æµå‘åˆ†ä¸º<code>inbound</code>å’Œ<code>outbound</code>ä¸¤ä¸ªéƒ¨åˆ†<span class="chineselangstop">ã€‚</span>å­—é¢æ„æ€ä¹Ÿå¾ˆå¥½ç†è§£<span class="chineselangcomma">ï¼Œ</span><code>inbound</code>æ˜¯å…¥æµé‡<span class="chineselangcomma">ï¼Œ</span><code>outbound</code>æ˜¯å‡ºæµé‡</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;outbound&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;streamSettings&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;tag&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;mux&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;settings&quot;</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;access&quot;</span>: <span class="string">&quot;/var/log/v2ray/access.log&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;loglevel&quot;</span>: <span class="string">&quot;info&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;error&quot;</span>: <span class="string">&quot;/var/log/v2ray/error.log&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;outboundDetour&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;direct&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;settings&quot;</span>: <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;blocked&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;blackhole&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;settings&quot;</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;inbound&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;network&quot;</span>: <span class="string">&quot;ws&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;kcpSettings&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;wsSettings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/yukkuridoujinshi&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;tcpSettings&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;tlsSettings&quot;</span>: &#123;&#125;,</span><br><span class="line">      <span class="attr">&quot;security&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;ip&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">&quot;udp&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;clients&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;alterId&quot;</span>: <span class="number">104</span>,</span><br><span class="line">          <span class="attr">&quot;security&quot;</span>: <span class="string">&quot;aes-128-gcm&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;f1412d7b-d064-410e-bfdc-790d314a9587&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;auth&quot;</span>: <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="number">1234</span>,</span><br><span class="line">    <span class="attr">&quot;listen&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;inboundDetour&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">&quot;routing&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;rules&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;ip&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;0.0.0.0/8&quot;</span>,</span><br><span class="line">            <span class="string">&quot;10.0.0.0/8&quot;</span>,</span><br><span class="line">            <span class="string">&quot;100.64.0.0/10&quot;</span>,</span><br><span class="line">            <span class="string">&quot;127.0.0.0/8&quot;</span>,</span><br><span class="line">            <span class="string">&quot;169.254.0.0/16&quot;</span>,</span><br><span class="line">            <span class="string">&quot;172.16.0.0/12&quot;</span>,</span><br><span class="line">            <span class="string">&quot;192.0.0.0/24&quot;</span>,</span><br><span class="line">            <span class="string">&quot;192.0.2.0/24&quot;</span>,</span><br><span class="line">            <span class="string">&quot;192.168.0.0/16&quot;</span>,</span><br><span class="line">            <span class="string">&quot;198.18.0.0/15&quot;</span>,</span><br><span class="line">            <span class="string">&quot;198.51.100.0/24&quot;</span>,</span><br><span class="line">            <span class="string">&quot;203.0.113.0/24&quot;</span>,</span><br><span class="line">            <span class="string">&quot;::1/128&quot;</span>,</span><br><span class="line">            <span class="string">&quot;fc00::/7&quot;</span>,</span><br><span class="line">            <span class="string">&quot;fe80::/10&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">&quot;domain&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;port&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">          <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;blocked&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;domainStrategy&quot;</span>: <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;strategy&quot;</span>: <span class="string">&quot;rules&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;dns&quot;</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>port</code> æ˜¯V2Rayç¨‹åºä¾¦å¬çš„ç«¯å£å·<span class="chineselangcomma">ï¼Œ</span>æ³¨æ„å’Œ<strong>Candyfileé‡Œçš„ä¿æŒä¸€è‡´</strong>ï¼›<code>protocol</code>æ˜¯æŒ‡å…¥æµé‡æ•°æ®ä½¿ç”¨çš„åŠ å¯†åè®®<span class="chineselangcomma">ï¼Œ</span>é»˜è®¤æ˜¯V2Rayé¡¹ç›®è‡ªè¡Œå¼€å‘çš„ vmess åè®®<span class="chineselangcomma">ï¼Œ</span>ä¸€èˆ¬ä¸åšä¿®æ”¹ï¼›<code>id</code>æ˜¯ç”¨æ¥åŒºåˆ†ä¸åŒV2Rayè½¯ä»¶çš„è¯†åˆ«ç <span class="chineselangcomma">ï¼Œ</span>åªæœ‰<code>id</code>å®Œå…¨ä¸€è‡´æ—¶<span class="chineselangcomma">ï¼Œ</span>æ‰å¯ä»¥è®©ä¸¤ä¸ªV2Rayè½¯ä»¶ååŒå·¥ä½œ<span class="chineselangcomma">ï¼Œ</span>ç±»ä¼¼äºåŠ å¯†å¯†é’¥<span class="chineselangcomma">ï¼Œ</span>æ ¼å¼ç‰¹æ®Š(<code>UUID</code>)ä¸€èˆ¬é€šè¿‡è½¯ä»¶ç”Ÿæˆ<span class="chineselangstop">ã€‚</span>**ï¼ˆå®‰è£…v2rayçš„æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ª<code>port</code>å·å’Œ<code>UUID</code>è‡ªåŠ¨å¡«å†™åœ¨<code>config.json</code>é‡Œ<span class="chineselangcomma">ï¼Œ</span>ä½¿ä¸ä½¿ç”¨ç”Ÿæˆçš„éšæ„å°±å¥½ï¼‰**å¦å¤–<code>alterId</code>çš„å€¼ä¹Ÿå¯ä»¥éšä¾¿å¡«ï¼ˆé»˜è®¤64<span class="chineselangcomma">ï¼Œ</span>ä¸æ¸…æ¥šèŒƒå›´<span class="chineselangcomma">ï¼Œ</span>64~233å†…éƒ½æ˜¯å¯ä»¥çš„<span class="chineselangcomma">ï¼Œ</span>æ³¨æ„å’Œå®¢æˆ·ç«¯ä¿æŒä¸€è‡´</p><p>æ³¨æ„<code>Network</code> = <code>ws</code> (WebSocket)ä»¥åŠwsSettingé‡Œçš„<code>path</code>è®¾å®š<span class="chineselangstop">ã€‚</span>è¿™é‡Œçš„<code>path</code>éœ€è¦å’Œ<code>Caddyfile</code>é‡Œçš„ä»¥åŠå®¢æˆ·ç«¯çš„ä¸€è‡´</p><p>VPSä½œä¸ºä»£ç†æœåŠ¡å™¨çš„è¯<span class="chineselangcomma">ï¼Œ</span>V2Rayçš„<code>outbound</code>éƒ¨åˆ†ä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹<span class="chineselangcomma">ï¼Œ</span>å…¶é»˜è®¤é…ç½®ä¹Ÿæ²¡ä»€ä¹ˆå®é™…å†…å®¹</p><p>åŒæ—¶<span class="chineselangcomma">ï¼Œ</span>V2Rayä¹Ÿæ”¯æŒShadowsocksåè®®<span class="chineselangcomma">ï¼Œ</span>æŠŠV2Rayè½¯ä»¶å½“åšShadowsocksæœåŠ¡å™¨æ¥ä½¿ç”¨<span class="chineselangstop">ã€‚</span>å®Œæˆæ­¤åŠŸèƒ½<span class="chineselangcomma">ï¼Œ</span>éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ <code>inboundDetour</code>é…ç½®å—<span class="chineselangcomma">ï¼Œ</span>ä½¿å…¶æ”¯æŒå¦ä¸€ç§å…¥æµé‡</p></blockquote><p>V2rayçš„é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š<a target="_blank" rel="noopener" href="https://github.com/KiriKira/vTemplate">https://github.com/KiriKira/vTemplate</a></p><h3 id="v2ray-config-json-span-class-chineselangpause-ã€-span-caddyfileé…ç½®æ–‡ä»¶æ£€æµ‹">v2ray/config.json<span class="chineselangpause">ã€</span>caddyfileé…ç½®æ–‡ä»¶æ£€æµ‹</h3><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;/usr/bin/v2ray/v2ray -<span class="built_in">test</span> -config /etc/v2ray/config.json</span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">caddy -agree -conf /etc/caddy/Caddyfile</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹log</strong></p><blockquote><p>Caddy wouldnâ€™t be registering new ACME accounts unless it was started from a fresh slate every time.</p><hr><p><strong>too many failed authorizations recently</strong></p><p><strong><a target="_blank" rel="noopener" href="https://community.letsencrypt.org/t/error-429-too-many-registrations-for-this-ip/83204">Error 429 too many registrations for this IP</a></strong></p><blockquote><p>2020/01/11 04:53:56 [INFO] [<a target="_blank" rel="noopener" href="http://yukkuri.tk">yukkuri.tk</a>] acme: Could not find solver for: tls-alpn-01<br>2020/01/11 04:53:56 [INFO] [<a target="_blank" rel="noopener" href="http://yukkuri.tk">yukkuri.tk</a>] acme: use http-01 solver<br>2020/01/11 04:53:56 [INFO] [<a target="_blank" rel="noopener" href="http://yukkuri.tk">yukkuri.tk</a>] acme: Trying to solve HTTP-01<br>2020/01/11 04:54:00 [INFO] Deactivating auth: <a target="_blank" rel="noopener" href="https://acme-v02.api.letsencrypt.org/acme/authz-v3/2220024879">https://acme-v02.api.letsencrypt.org/acme/authz-v3/2220024879</a><br>2020/01/11 04:54:00 [INFO] U...</p></blockquote></blockquote><p><strong>ç­‰ä¸€ä¼šå„¿ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“å¤šä¹…ï¼‰å°±å¥½äº†ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰</strong></p></blockquote><h2 id="å®¢æˆ·ç«¯V2rayçš„é…ç½®">å®¢æˆ·ç«¯V2rayçš„é…ç½®</h2><p>å®¢æˆ·ç«¯çš„è¯<span class="chineselangcomma">ï¼Œ</span><code>inbound</code>é…ç½®ä¾¦å¬æœ¬æœº<span class="chineselangcomma">ï¼Œ</span>è€Œ<code>outbound</code>åˆ™ç”¨æ¥é…ç½®è¿æ¥è®¿é—®çš„æœåŠ¡å™¨</p><blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;outbound&quot;</span>: &#123;</span><br><span class="line"> <span class="attr">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;network&quot;</span>: <span class="string">&quot;ws&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;kcpSettings&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">   <span class="attr">&quot;wsSettings&quot;</span>: &#123;</span><br><span class="line">     <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/yukkuridoujinshi&quot;</span>	<span class="comment">//ä½ çš„path</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">&quot;tcpSettings&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">   <span class="attr">&quot;tlsSettings&quot;</span>: &#123;&#125;,</span><br><span class="line">   <span class="attr">&quot;security&quot;</span>: <span class="string">&quot;tls&quot;</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;agentout&quot;</span>,</span><br><span class="line"> <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line"> <span class="attr">&quot;mux&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">   <span class="attr">&quot;concurrency&quot;</span>: <span class="number">8</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;vnext&quot;</span>: [</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="attr">&quot;users&quot;</span>: [</span><br><span class="line">         &#123;</span><br><span class="line">           <span class="attr">&quot;alterId&quot;</span>: <span class="number">104</span>,	<span class="comment">//æœåŠ¡ç«¯çš„</span></span><br><span class="line">           <span class="attr">&quot;security&quot;</span>: <span class="string">&quot;aes-128-gcm&quot;</span>,</span><br><span class="line">           <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;f1412d7b-d064-410e-bfdc-790d314a9587&quot;</span> <span class="comment">//æœåŠ¡ç«¯çš„</span></span><br><span class="line">         &#125;</span><br><span class="line">       ],</span><br><span class="line">       <span class="attr">&quot;port&quot;</span>: <span class="number">443</span>,	<span class="comment">//ä¸èƒ½æ”¹</span></span><br><span class="line">       <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;yukkuri.tk&quot;</span>	<span class="comment">//ä½ çš„åŸŸå</span></span><br><span class="line">     &#125;</span><br><span class="line">   ]</span><br><span class="line"> &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;log&quot;</span>: &#123;</span><br><span class="line"> <span class="attr">&quot;access&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line"> <span class="attr">&quot;loglevel&quot;</span>: <span class="string">&quot;info&quot;</span>,</span><br><span class="line"> <span class="attr">&quot;error&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;outboundDetour&quot;</span>: [</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;direct&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">     <span class="attr">&quot;response&quot;</span>: <span class="literal">null</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;blockout&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;blackhole&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">     <span class="attr">&quot;response&quot;</span>: &#123;</span><br><span class="line">       <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;http&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">],</span><br><span class="line"><span class="attr">&quot;inbound&quot;</span>: &#123;</span><br><span class="line"> <span class="attr">&quot;streamSettings&quot;</span>: <span class="literal">null</span>,</span><br><span class="line"> <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;ip&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;udp&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">   <span class="attr">&quot;clients&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">   <span class="attr">&quot;auth&quot;</span>: <span class="string">&quot;noauth&quot;</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;socks&quot;</span>,</span><br><span class="line"> <span class="attr">&quot;port&quot;</span>: <span class="number">12345</span>,	<span class="comment">//å¡«ä¸€ä¸ªä¸ä¼šè¢«å ç”¨çš„ç«¯å£&lt;span class=&#x27;chineselangcomma&#x27;&gt;ï¼Œ&lt;/span&gt;é»˜è®¤1080&lt;span class=&#x27;chineselangstop&#x27;&gt;ã€‚&lt;/span&gt;ç”¨çš„æ˜¯å›¾å½¢æ“ä½œç•Œé¢çš„è¯è®°å¾—æ”¹æœ¬åœ°ç«¯å£</span></span><br><span class="line"> <span class="attr">&quot;listen&quot;</span>: <span class="string">&quot;0.0.0.0&quot;</span> <span class="comment">//ç›‘å¬æ‰€æœ‰æµé‡</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;inboundDetour&quot;</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">&quot;routing&quot;</span>: &#123;</span><br><span class="line"> <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;rules&quot;</span>: [</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="attr">&quot;ip&quot;</span>: [</span><br><span class="line">         <span class="string">&quot;0.0.0.0/8&quot;</span>,</span><br><span class="line">         <span class="string">&quot;10.0.0.0/8&quot;</span>,</span><br><span class="line">         <span class="string">&quot;100.64.0.0/10&quot;</span>,</span><br><span class="line">         <span class="string">&quot;127.0.0.0/8&quot;</span>,</span><br><span class="line">         <span class="string">&quot;169.254.0.0/16&quot;</span>,</span><br><span class="line">         <span class="string">&quot;172.16.0.0/12&quot;</span>,</span><br><span class="line">         <span class="string">&quot;192.0.0.0/24&quot;</span>,</span><br><span class="line">         <span class="string">&quot;192.0.2.0/24&quot;</span>,</span><br><span class="line">         <span class="string">&quot;192.168.0.0/16&quot;</span>,</span><br><span class="line">         <span class="string">&quot;198.18.0.0/15&quot;</span>,</span><br><span class="line">         <span class="string">&quot;198.51.100.0/24&quot;</span>,</span><br><span class="line">         <span class="string">&quot;203.0.113.0/24&quot;</span>,</span><br><span class="line">         <span class="string">&quot;::1/128&quot;</span>,</span><br><span class="line">         <span class="string">&quot;fc00::/7&quot;</span>,</span><br><span class="line">         <span class="string">&quot;fe80::/10&quot;</span></span><br><span class="line">       ],</span><br><span class="line">       <span class="attr">&quot;domain&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">       <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">       <span class="attr">&quot;port&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">       <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">   ],</span><br><span class="line">   <span class="attr">&quot;domainStrategy&quot;</span>: <span class="string">&quot;IPIfNonMatch&quot;</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">&quot;strategy&quot;</span>: <span class="string">&quot;rules&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;dns&quot;</span>: &#123;</span><br><span class="line"> <span class="attr">&quot;servers&quot;</span>: [</span><br><span class="line">   <span class="string">&quot;8.8.8.8&quot;</span>,</span><br><span class="line">   <span class="string">&quot;8.8.4.4&quot;</span>,</span><br><span class="line">   <span class="string">&quot;localhost&quot;</span></span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p>å†ä¸‹è½½V2ray<span class="chineselangcomma">ï¼Œ</span>æŒ‰éœ€ä¸‹è½½V2rayNç­‰<span class="chineselangcomma">ï¼Œ</span>ä¿®æ”¹ç›¸åº”config.jsonå³å¯</p><h2 id="VPSç³»ç»Ÿçš„å…¶ä»–è®¾å®š">VPSç³»ç»Ÿçš„å…¶ä»–è®¾å®š</h2><h3 id="å¼€å¯BBR">å¼€å¯BBR</h3><blockquote><p><code>bbr</code>è¿™ä¸ªä¸œè¥¿çœŸä¹ƒç¥å™¨<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥å¦‚æœä½ çš„ä»£ç†æœåŠ¡å™¨åœ¨å›½å¤–<span class="chineselangcomma">ï¼Œ</span>å¼ºçƒˆå»ºè®®å¼€å¯<code>bbr</code>çš„åŠŸèƒ½<span class="chineselangstop">ã€‚</span>æˆ‘çš„å°é¸¡ä½¿ç”¨çš„æ˜¯<code>debian 9</code><span class="chineselangcomma">ï¼Œ</span>é»˜è®¤å†…æ ¸æ˜¯æ”¯æŒbbråŠ é€Ÿçš„<span class="chineselangcomma">ï¼Œ</span>ä½†æ˜¯æ²¡æœ‰å¼€å¯<span class="chineselangstop">ã€‚</span>å¦‚æœä½ çš„ç³»ç»Ÿè¿‡äºé™ˆæ—§<span class="chineselangcomma">ï¼Œ</span>éœ€è¦æ›´æ–°linuxå†…æ ¸è‡³<code>4.9</code>ä»¥ä¸Šå¹¶ç¼–è¯‘å®‰è£…bbr<span class="chineselangcomma">ï¼Œ</span>å…·ä½“çš„å®‰è£…æ­¥éª¤å¯ä»¥å»ç™¾åº¦<span class="chineselangcomma">ï¼Œ</span>ç½‘ä¸Šæœ‰å¤§æŠŠçš„æ•™ç¨‹<span class="chineselangstop">ã€‚</span></p></blockquote><h4 id="æ£€æŸ¥Linuxå†…æ ¸çš„ç‰ˆæœ¬">æ£€æŸ¥Linuxå†…æ ¸çš„ç‰ˆæœ¬</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å†…æ ¸æ˜¯å¦&gt;=4.14.0</p><p>è‹¥æ— åˆ™å‡çº§å†…æ ¸ï¼š</p><blockquote><p>1.è·å–rootæƒé™</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -s</span><br></pre></td></tr></table></figure><p>2.ä¸‹è½½æœ€æ–°å†…æ ¸,æœ€æ–°å†…æ ¸çœ‹<a target="_blank" rel="noopener" href="http://kernel.ubuntu.com/~kernel-ppa/mainline/">è¿™é‡Œ</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.14/linux-image-4.14.0-041400-generic_4.14.0-041400.201711122031_amd64.deb</span><br></pre></td></tr></table></figure><p>3.å®‰è£…å†…æ ¸</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i linux-image-4.14.0-041400-generic_4.14.0-041400.201711122031_amd64.deb</span><br></pre></td></tr></table></figure><p>4.åˆ é™¤æ—§å†…æ ¸ï¼ˆå¯é€‰ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep linux-image </span><br><span class="line">apt-get purge æ—§å†…æ ¸</span><br></pre></td></tr></table></figure><p>5.æ›´æ–°å¼•å¯¼grubç³»ç»Ÿå¼•å¯¼æ–‡ä»¶å¹¶é‡æ–°å¯åŠ¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update-grub</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>é‡å¯å®Œæ¯•é‡æ–°é“¾æ¥æœåŠ¡å™¨å¹¶è·å–rootæƒé™</p></blockquote><blockquote><p>å¼€å¯<strong>BBR</strong>éœ€è¦ä¿®æ”¹/etc/sysctl.conf<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥<strong>å…ˆåŠ æƒé™</strong><span class="chineselangcomma">ï¼Œ</span>æ‰§è¡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>ç„¶åå¼€å¯<strong>BBR</strong><span class="chineselangcomma">ï¼Œ</span>å…ˆæ‰§è¡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">modprobe tcp_bbr</span><br><span class="line">echo &quot;tcp_bbr&quot; &gt;&gt; /etc/modules-load.d/modules.conf</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>ä¿å­˜ç”Ÿæ•ˆ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure><ul><li>è¿”å›å€¼ä¸€èˆ¬ä¸ºï¼šnet.ipv4.tcp_available_congestion_control = <strong>bbr</strong> cubic reno</li></ul><p>æŸ¥çœ‹BBRæ˜¯å¦å¯åŠ¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure><ul><li>è¿”å›å€¼ä¸€èˆ¬ä¸ºï¼štcp_<strong>bbr</strong> 20480 0</li></ul><p>å¦‚ä»¥ä¸ŠæŸ¥çœ‹è¿”å›å€¼ä¸ä¸€æ ·ä½†éƒ½æœ‰<strong>BBR</strong><span class="chineselangcomma">ï¼Œ</span>åˆ™å†…æ ¸å·²ç»æˆåŠŸå¼€å¯<strong>BBR</strong></p></blockquote><h3 id="VPSä¸Šçš„Ubuntuç³»ç»Ÿé‡å¯ï¼ˆSystem-Restart-Requiredï¼‰">VPSä¸Šçš„Ubuntuç³»ç»Ÿé‡å¯ï¼ˆSystem Restart Requiredï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><blockquote><ol><li>ä½ æ€ä¹ˆçœŸçš„é‡æ–°å¯åŠ¨(æˆ‘æ˜¯ä¸€ä¸ªåˆå­¦è€…<span class="chineselangcomma">ï¼Œ</span>å¹¶ä½¿ç”¨12.04.1 LTS)ï¼Ÿ</li><li>æˆ‘åº”è¯¥åœ¨æç¤ºæ—¶æ€»æ˜¯é‡æ–°å¯åŠ¨ç³»ç»Ÿå—ï¼Ÿ</li><li>é‡æ–°å¯åŠ¨ç³»ç»Ÿæ˜¯å¦ä¼šå½±å“é€šè¿‡SSHè¿›è¡Œè®¿é—®æˆ–åœ¨æ‰§è¡Œæ­¤æ“ä½œä¹‹å‰éœ€è¦è€ƒè™‘çš„å…¶ä»–æ³¨æ„äº‹é¡¹ï¼Ÿ</li></ol><ul><li><p>æ˜¯çš„ä½ åº”è¯¥<span class="chineselangstop">ã€‚</span>å¯¹äºå¤§å¤šæ•°æƒ…å†µ<span class="chineselangcomma">ï¼Œ</span>å®‰è£…Linuxå†…æ ¸æ›´æ–°æ—¶éœ€è¦é‡æ–°å¯åŠ¨<span class="chineselangstop">ã€‚</span>è¿™äº›æ›´æ–°é€šå¸¸æ˜¯å®‰å…¨æ›´æ–°<span class="chineselangcomma">ï¼Œ</span>ç„¶åæ‰ä¼šåœ¨é‡æ–°å¯åŠ¨åç”Ÿæ•ˆ<span class="chineselangstop">ã€‚</span>æ­£å¸¸åº”ç”¨ç¨‹åº(å¦‚Firefox)çš„æ›´æ–°åœ¨é‡æ–°å¯åŠ¨ç¨‹åºåç”Ÿæ•ˆ<span class="chineselangstop">ã€‚</span> Firefoxåº”è¯¥æç¤ºä½ è‡ªåŠ¨æ‰§è¡Œæ­¤æ“ä½œ<span class="chineselangcomma">ï¼Œ</span>ä½†å…¶ä»–ç¨‹åºå¯èƒ½ä¸ä¼š<span class="chineselangcomma">ï¼Œ</span>å› æ­¤éœ€è¦ç‰¢è®°<span class="chineselangstop">ã€‚</span></p></li><li><p>è¦ä»å‘½ä»¤è¡Œé‡æ–°å¯åŠ¨<span class="chineselangcomma">ï¼Œ</span>è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo reboot</span><br></pre></td></tr></table></figure></li><li><p>æ€»çš„æ¥è¯´<span class="chineselangcomma">ï¼Œ</span>é‡æ–°å¯åŠ¨æ˜¯ä¸€é¡¹éå¸¸å®‰å…¨çš„æ“ä½œ<span class="chineselangcomma">ï¼Œ</span>æˆ‘ä¸ä¼šè®¤ä¸ºå®ƒåœ¨ä»»ä½•æ–¹é¢éƒ½ä¸å®‰å…¨<span class="chineselangstop">ã€‚</span>å½“ç„¶<span class="chineselangcomma">ï¼Œ</span>å½“æ‚¨é‡æ–°å¯åŠ¨è®¡ç®—æœºæ—¶<span class="chineselangcomma">ï¼Œ</span>ä¼šä¸¢å¤±RAMä¸­çš„æ‰€æœ‰ä¿¡æ¯<span class="chineselangcomma">ï¼Œ</span>å› æ­¤è¯·ç¡®ä¿åœ¨å…³é—­è®¡ç®—æœºä¹‹å‰ä¿å­˜æ‰€æœ‰æ‰“å¼€çš„æ–‡æ¡£å’Œæ–‡ä»¶<span class="chineselangstop">ã€‚</span>å½“ä½ é‡æ–°å¯åŠ¨æ—¶<span class="chineselangcomma">ï¼Œ</span>ä½ çš„ç”µè„‘å½“ç„¶ä¼šè„±æœºå‡ åˆ†é’Ÿ<span class="chineselangstop">ã€‚</span>å¦‚æœä½ æ­£åœ¨è¿è¡Œä¸€å°æœåŠ¡å™¨<span class="chineselangcomma">ï¼Œ</span>å®ƒå°†ä¼šåœæœºå‡ åˆ†é’Ÿ<span class="chineselangstop">ã€‚</span>å¦‚æœä½ æœ‰ä¸€ä¸ªå¼€æ”¾çš„SSHä¼šè¯<span class="chineselangcomma">ï¼Œ</span>å®ƒå°†è¢«ç»ˆæ­¢<span class="chineselangstop">ã€‚</span></p></li><li><p>é‡å¯åæ²¡æœ‰ä»»ä½•ä¸œè¥¿ä¼šå½±å“sshè¿æ¥<span class="chineselangstop">ã€‚</span></p></li></ul></blockquote><h3 id="å¼€æœºè‡ªåŠ¨æ‰§è¡Œ">å¼€æœºè‡ªåŠ¨æ‰§è¡Œ</h3><blockquote><p>rc.localè„šæœ¬æ˜¯ä¸€ä¸ªUbuntuå¼€æœºåä¼šè‡ªåŠ¨æ‰§è¡Œçš„è„šæœ¬<span class="chineselangcomma">ï¼Œ</span>åœ¨è¯¥è„šæœ¬å†…æ·»åŠ å‘½ä»¤è¡Œ<span class="chineselangcomma">ï¼Œ</span>å¼€æœºæ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ<span class="chineselangstop">ã€‚</span></p><p>è„šæœ¬è·¯å¾„/etc/rc.local</p><p>éœ€è¦rootæƒé™æ‰èƒ½ä¿®æ”¹<span class="chineselangstop">ã€‚</span></p><p>æ·»åŠ å‘½ä»¤<br>æ‰“å¼€æ–‡ä»¶<span class="chineselangcomma">ï¼Œ</span>åœ¨exit 0å‰æ·»åŠ è¦æ‰§è¡Œçš„å‘½ä»¤<span class="chineselangcomma">ï¼Œ</span>é‡Œé¢å¯ä»¥ç›´æ¥å†™å‘½ä»¤æˆ–è€…æ‰§è¡ŒShellè„šæœ¬æ–‡ä»¶sh<span class="chineselangstop">ã€‚</span></p><p>å¦‚ä¸‹<span class="chineselangcomma">ï¼Œ</span>æ·»åŠ çš„5è¡Œå‘½ä»¤</p><p>ç¬¬1,2è¡Œæ˜¯ç”¨äºè¾“å‡ºlog çš„<br>ç¬¬4,5è¡Œ<span class="chineselangcomma">ï¼Œ</span>æ˜¯å¯åŠ¨ç¨‹åºçš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh -e</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># rc.local</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This script is executed at the end of each multiuser runlevel.</span></span><br><span class="line"><span class="comment"># Make sure that the script will &quot;exit 0&quot; on success or any other</span></span><br><span class="line"><span class="comment"># value on error.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># In order to enable or disable this script just change the execution</span></span><br><span class="line"><span class="comment"># bits.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default this script does nothing.:</span></span><br><span class="line">/bin/bash /usr/<span class="built_in">local</span>/XX-Net-3.10.4/xx_net.sh 1&gt;&gt; /etc/mylog   <span class="comment"># send stderr from rc.local to a log file </span></span><br><span class="line">2&gt;&amp;1   <span class="comment"># send stdout to the same log file </span></span><br><span class="line"><span class="built_in">set</span> -x    <span class="comment"># tell sh to display commands before execution </span></span><br><span class="line">sudo miredo</span><br><span class="line">sudo /usr/<span class="built_in">local</span>/XX-Net-3.10.4/xx_net.sh start</span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„è®¾ç½®å¼€æœºè‡ªåŠ¨æ‰§è¡Œçš„sudoå‘½ä»¤ä¹Ÿæ˜¯å¯ä»¥æ‰§è¡Œçš„</p></blockquote><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ³¨æ„å› ä¸ºæ˜¯æ–°å»ºäº†caddyç”¨æˆ·è¿›è¡Œæ“ä½œ<span class="chineselangcomma">ï¼Œ</span>æ‰€ä»¥å¯¹caddy.serviceæœ‰ç›¸åº”æ›´æ”¹ <a href="#fnref1" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:1" class="footnote-backref">â†©ï¸</a></p></li></ol></section></div><footer class="article-footer"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/categories/tech/VPN/" rel="tag">VPN</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/categories/tech/aws/" rel="tag">aws</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/categories/tech/%E6%80%BB%E7%BB%93/" rel="tag">æ€»ç»“</a></li></ul><a data-clipboard-text="ç”¨awsæ¥ç©ç©V2ray
https://edfus.xyz/2020/01/v2ray-aws/" class="article-share-link" href="javascript: void(0)" onclick="return window.copy2clipboard(this)">Share</a></footer></div><nav id="article-nav"><h3>ç›¸å…³æ–‡ç« ï¼š</h3><ul class="related-posts outer"><li><a href="/2019/12/deployment-win10/" class="article-more-link">win10å¿«é€Ÿéƒ¨ç½²ä¸ä¼˜åŒ–</a><a href="/categories/tech/Win10/" class="article-more-tag-link" rel="tag">Win10</a><a href="/categories/tech/%E4%BC%98%E5%8C%96/" class="article-more-tag-link" rel="tag">ä¼˜åŒ–</a><a href="/categories/tech/%E6%80%BB%E7%BB%93/" class="article-more-tag-link" rel="tag">æ€»ç»“</a></li><li><a href="/2019/12/why-Flash-dies-off/" class="article-more-link">Flashä¸ºä½•ä¼šè¢«æ·˜æ±°ï¼Ÿ</a><a href="/categories/tech/%E6%80%BB%E7%BB%93/" class="article-more-tag-link" rel="tag">æ€»ç»“</a><a href="/categories/tech/Flash/" class="article-more-tag-link" rel="tag">Flash</a></li></ul></nav></article><section id="gitalk" itemprop="comment"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/edfus/storage/gitalk/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" integrity="sha384-P4Jplb5vWfRd+LBQXD7rJPNZsnW1r/HZs5ud5Vqj8G8QT/WHpUWTyg0Us0o3L2fN" crossorigin="anonymous"></script><div id="gitalk-container"></div><script>var gitalk=new Gitalk({clientID:"e416342d498f5b12cc5c",clientSecret:"cc13255dddbbb4b3acaa93750e10d8e48d935b19",repo:"edfus.github.io",owner:"edfus",admin:["edfus"],id:"ID-179d8435cb978943381bbf50f451e41c",distractionFreeMode:!1,createIssueManually:!0,title:"ç”¨awsæ¥ç©ç©V2ray",body:"Category: tech<br>https://edfus.xyz/2020/01/v2ray-aws/",pagerDirection:"first"});gitalk.render("gitalk-container")</script></section></main><footer id="footer"><div id="footer-info">&copy; 2020 edfus<br>Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a><br><span class="post-count">ç«™ç‚¹æ€»å­—æ•°ï¼š38.5ä¸‡+</span><br>â™ª <span id="footer-song-name"><span class="delay0" style="animation:none 3.6s linear infinite;animation-delay:0ms">æœ€</span><span class="delay1" style="animation:none 3.6s linear infinite;animation-delay:.4s">ã‚‚</span><span class="delay2" style="animation:none 3.6s linear infinite;animation-delay:.8s">æ¾„</span><span class="delay3" style="animation:none 3.6s linear infinite;animation-delay:1.2s">ã¿</span><span class="delay4" style="animation:none 3.6s linear infinite;animation-delay:1.6s">ã‚</span><span class="delay5" style="animation:none 3.6s linear infinite;animation-delay:2s">ãŸ</span><span class="delay6" style="animation:none 3.6s linear infinite;animation-delay:2.4s">ã‚‹</span><span class="delay7" style="animation:none 3.6s linear infinite;animation-delay:2.8s">ç©º</span><span class="delay8" style="animation:none 3.6s linear infinite;animation-delay:3.2s">ã¨</span><span class="delay9" style="animation:none 3.6s linear infinite;animation-delay:3.6s">æµ·</span></span></div></footer><style>#footer a{color:#2ab8ff;background-color:rgba(0,0,0,.05);text-decoration:none;outline:0;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out}#footer a:focus,#footer a:hover{color:#00ffce}#footer{background:linear-gradient(black,transparent),url(//cdn.jsdelivr.net/gh/edfus/storage/images/root/footer-reimu.png.webp),#121621;border-top:1px solid #fff;color:#fff;margin:75px auto 0;overflow:hidden;width:100%;background-repeat:no-repeat,no-repeat,no-repeat;background-position:0 0,calc(60% + 40px) 40%,0 0;background-size:contain}#footer-info{line-height:1.6em;font-size:.85em;padding:50px 20px;margin:0 auto;width:854px}@media screen and (max-width:479px){#footer{margin:0}#footer-info{padding:20px 0 20px 20px;width:calc(97.5% - 20px)}}</style><a href="#" class="gotop" tabindex="-1"><img src="//cdn.jsdelivr.net/gh/edfus/storage/up.png.webp" alt="go to top"></a><aside class="article-share-success" hidden="true">Share link copied</aside><script src="https://cdn.jsdelivr.net/gh/edfus/storage/js/script@1.5.js" async></script><script src="https://cdn.jsdelivr.net/gh/edfus/storage/glightbox/glightbox@1.2.min.js" async></script></remove-mobile-gap></body></html>